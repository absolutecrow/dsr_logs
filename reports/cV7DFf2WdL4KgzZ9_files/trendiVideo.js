(window.webpackJsonppageos=window.webpackJsonppageos||[]).push([[7],{"2+si":function(e,i,t){"use strict";t.r(i),t.d(i,"default",function(){return n});var i=t("lwsE"),s=t.n(i),i=t("W8MJ"),o=t.n(i),r=t("YfMo"),l=t("Am97"),a=t("CtoA"),c=t("o3b6"),d=t("OqRl"),h=t("L6NH"),n=function(){function n(e){var i=this,t=(s()(this,n),e.playlistId),o=e.precontentUrl;e.stickySize&&(e.size=e.stickySize),e.stickyPosition&&(e.location=e.stickyPosition),this.playerId="tyche_trendi_video",this.locationKey=window.ramp.isMobile?"mobileLocation":"desktopLocation",this.adUnitType="trendi_video",this.validRules=this.checkValidRules(e),this.validRules&&(this.rules=e,this.boltConfig=Object(l.f)(e.content,t,o),this.playerType="ads_only"===this.rules.content?"precontent":"playlist",this.device=window.ramp.settings.device,this.size=this.rules.size["tablet"===this.device?"desktop":this.device],this.rules.embedSize&&(this.embedSize=this.rules.embedSize["tablet"===this.device?"desktop":this.device]),this.setBoltEvents(),this.isShowing=!1,this.isDocked=!1,this.mobileLocation=this.rules.mobileLocation,this.topSelector=this.rules.selector,"top"===this.mobileLocation&&window.ramp.isMobile&&(this.topMobilePlacementEnabled=!0,this.topMobilePlacementHandler=new a.a,this.dock=this.dock.bind(this),this.topMobilePlacementHandler.init=this.topMobilePlacementHandler.init.bind(this)),this.containerDiv=this.buildContainer(),this.closeBtnClass="pw-close-btn",window.ramp.showCornerVideo=this.show.bind(this),window.ramp.closeCornerVideo=this.close.bind(this),window.ramp.hideCornerVideo=this.hide.bind(this),e.show=this.show.bind(this),e.close=this.close.bind(this),e.destroyUnit=this.destroyUnit.bind(this),window.PageOS.BUS.on("bottom_rail_loaded",function(){i.isDocked&&"bottom"===i.rules.location.y&&!i.topMobilePlacementEnabled&&i.dock()},!1))}return o()(n,[{key:"placeScript",value:function(){null!==this.script&&(window.PageOS=window.PageOS||{},window.PageOS.BoltScriptElement=this.containerDiv.appendChild(this.script),this.script=null)}},{key:"init",value:function(){var e;this.rules.loaded=!0,this.validRules&&(e=this.getBuildScript(),(this.script=e).id="tyche_trendi_video_script",Object(l.h)(this.device,this.size),"corner"===this.rules[this.locationKey]?(this.placeScript(),document.body.appendChild(this.containerDiv)):"in_article"===this.rules[this.locationKey]?(new d.a).init(this):"sidebar"===this.rules[this.locationKey]?(new c.a).init(this):"top"===this.rules[this.locationKey]&&this.topMobilePlacementHandler.init())}},{key:"getBuildScript",value:function(){var e=this.rules,i={boltConfig:this.boltConfig,id:this.playerId,onReady:"window.ramp.handleBoltEvents.trendiVideo",playerType:this.playerType,adUnitType:this.adUnitType};return!0===e.noPrerollHide&&(i.noPrerollHide=e.noPrerollHide),void 0!==e.prerollAdAmt&&(i.prerollAdAmt=e.prerollAdAmt),void 0!==e.prerollAdAmt&&(i.prerollAdAmt=e.prerollAdAmt),"close"!==e.playerBehaviorOnAdUnavailable&&"number"==typeof e.refreshRetries&&"number"==typeof e.refreshTimeout&&(i.prerollAdRefreshRetries=parseInt(e.refreshRetries,10),i.prerollAdRefreshTimeout=parseInt(e.refreshTimeout,10)),Object(l.b)(i)}},{key:"buildContainer",value:function(){if(document.getElementById("tyche_trendi_video_container"))return document.getElementById("tyche_trendi_video_container");var e=document.createElement("div");return e.id="tyche_trendi_video_container",this.topMobilePlacementEnabled||(e.style.height="".concat(this.size[1],"px"),e.style.width="".concat(this.size[0],"px"),e.style.visibility="hidden",e.style.opacity="0"),"corner"===this.rules[this.locationKey]&&(e.style.position="fixed",e.style.right="0",e.style.bottom="0"),e}},{key:"dock",value:function(){var e;this.isInContent&&!0!==this.wasViewed||(this.topMobilePlacementEnabled?this.topMobilePlacementHandler.dockVideo():(this.isDocked=!0,this.adIsPlaying||Object(l.a)(this.containerDiv,window.ramp.closeCornerVideo,this.closeBtnClass),e={player:this.containerDiv,location:"".concat(this.rules.location.x,"-").concat(this.rules.location.y),stickyH:this.size[1],stickyW:this.size[0]},Object(l.e)(e,this)))}},{key:"close",value:function(){if("corner"===this.rules[this.locationKey]&&window.Bolt&&window.Bolt.removeVideo(this.playerId,!0),this.topMobilePlacementEnabled)this.topMobilePlacementHandler.undockVideo();else{if("function"==typeof this.undock)return this.undock();this.isShowing=!1,window.Bolt&&window.Bolt.removeVideo(this.playerId),this.containerDiv.remove()}}},{key:"hide",value:function(){this.isShowing=!1,this.containerDiv.style.visibility="hidden",this.containerDiv.style.opacity="0",this.containerDiv.style.zIndex="-1"}},{key:"show",value:function(){this.isShowing||!this.validRules||window.ramp.takeOverActive||(this.isShowing=!this.isShowing,this.isDocked||"corner"!==this.rules[this.locationKey]||(this.isDocked=!0,this.dock()),r.j.info("Show Corner Video"),null===document.getElementById("tyche_trendi_video_script")?this.init():(this.containerDiv.style.visibility="visible",this.containerDiv.style.opacity="1",this.containerDiv.style.zIndex="2147483645"))}},{key:"handleCloseButton",value:function(){var e=this;Object(l.a)(this.containerDiv,function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(e.playerId),window.Bolt.pauseMedia(e.playerId),e.observer&&e.observer.unobserve(e.observedElement),e.playerIntersectingObserver&&e.playerIntersectingObserver.unobserve(e.playerIntersectingObservedElement),window.ramp.closeCornerVideo()},this.closeBtnClass)}},{key:"destroyUnit",value:function(){r.j.info("Close Trendi Native Video"),window.Bolt.removeVideo(this.playerId,!0),this.observer&&this.observer.unobserve(this.observedElement),this.playerIntersectingObserver&&this.playerIntersectingObserver.unobserve(this.playerIntersectingObservedElement),this.containerDiv.remove(),this.anchorDiv&&this.anchorDiv.remove(),this.topContainerDiv&&this.topContainerDiv.remove(),this.playerContainerDiv&&this.playerContainerDiv.remove(),delete window.ramp.settings.slots.trendi_video}},{key:"trackPlayerIntersecting",value:function(){var i=this;try{var e=((Object(h.b)()||{}).settings||{}).minimumViewability;if(!(e&&0<=e))return void r.j.info('Player intersecting was skipped, no "minimum viewability" value specified (video player "'.concat(this.playerId,'")'));var t=new IntersectionObserver(function(e){e.forEach(function(e){i.isShowing&&(e.isIntersecting&&(r.j.info('In view: Resume media (video player "'.concat(i.playerId,'")')),window.Bolt.resumeMedia(i.playerId)),e.isIntersecting||(r.j.info('Out of view: Pause media (video player "'.concat(i.playerId,'")')),window.Bolt.pauseMedia(i.playerId)))})},{rootMargin:"0px",threshold:e/100}),o=document.querySelector("#tyche_trendi_video_container");t.observe(o),this.playerIntersectingObserver=t,this.playerIntersectingObservedElement=o}catch(e){r.j.error(e)}}},{key:"setBoltEvents",value:function(){var o=this,e=this;window.ramp.handleBoltEvents=window.ramp.handleBoltEvents||{},window.ramp.handleBoltEvents.trendiVideo=function(){window.Bolt.playMedia(o.playerId),window.Bolt.on(o.playerId,window.Bolt.BOLT_AD_STARTED,function(){o.adIsPlaying=!0,o.show(),Object(l.d)()}),window.Bolt.on(o.playerId,window.Bolt.BOLT_CONTENT_STARTED,function(){e.show(),o.adIsPlaying=!1,e.isDocked?"sidebar"!==e.rules.location.y&&e.handleCloseButton():e.isTopDocked&&e.handleCloseButton()}),window.Bolt.on(o.playerId,window.Bolt.BOLT_AD_COMPLETE,function(e,i){var t=(null==i?void 0:i.isAdPod)||!1,i=(null==i?void 0:i.isAdFallbackMode)||!1;o.adIsPlaying=!1,!o.isDocked||t&&!i||"sidebar"===o.rules.location.y||o.handleCloseButton()}),window.Bolt.on(o.playerId,window.Bolt.BOLT_AD_ERROR,function(){!o.rules.noPrerollHide&&"ads_only"!==o.rules.content||(o.adIsPlaying=!1,o.isShowing=!0,o.close())}),"precontent"===o.playerType&&window.Bolt.on(o.playerId,window.Bolt.BOLT_AD_SESSION_COMPLETE,function(){o.destroyUnit()}),o.trackPlayerIntersecting()}}},{key:"checkValidRules",value:function(e){var i=window.ramp.settings.isMobile?"mobile":"desktop";return void 0===e.playlistId&&void 0===e.precontentUrl?(r.j.info("Video needs playlist or precontent URL"),!1):void 0!==e.size&&void 0!==e.size[i]||(r.j.info("Video missing size rule"),!1)}}]),n}()},CtoA:function(e,i,t){"use strict";t.d(i,"a",function(){return a});var i=t("pVnL"),o=t.n(i),i=t("lwsE"),n=t.n(i),i=t("W8MJ"),s=t.n(i),r=t("YfMo"),l=t("Am97"),a=function(){function e(){n()(this,e)}return s()(e,[{key:"init",value:function(){var e,i=this.topMobilePlacementHandler;i.dockVideo=i.dockVideo.bind(this),i.undockVideo=i.undockVideo.bind(this),this.topSelectorElement=document.querySelector(this.topSelector),null===this.topSelectorElement?r.j.error("No element found for selector: ".concat(this.topSelector,".")):(e=window.innerWidth,this.initialH=e/(16/9),this.initialW=e,this.closeBtnClass="pw-close-btn-top",this.topContainerDiv=document.createElement("div"),this.topContainerDiv.id="tyche_trendi_parent_container",o()(this.topContainerDiv.style,{height:"".concat(e/(16/9),"px"),"background-color":"#000000",width:"100vw","margin-left":"calc(-50vw + 50%)"}),this.playerContainerDiv=document.createElement("div"),this.playerContainerDiv.style.backgroundColor="rgba(0, 0, 0, 0.9)",this.playerContainerDiv.style.width="100%",this.containerDiv.style.margin="auto",this.topContainerDiv.appendChild(this.playerContainerDiv),this.playerContainerDiv.appendChild(this.containerDiv),this.topSelectorElement.insertAdjacentElement(this.rules.embedPosition,this.topContainerDiv),this.observer=Object(l.g)(this.topSelectorElement,i.undockVideo.bind(this),this.dock.bind(this),this,0))}},{key:"dockVideo",value:function(){var e=this,i=(this.placeScript&&this.placeScript(),this.isTopDocked=!0,this.adIsPlaying||Object(l.a)(this.containerDiv,function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(e.playerId),window.Bolt.pauseMedia(e.playerId),e.observer&&e.observer.unobserve(e.observedElement),e.topMobilePlacementHandler.undockVideo()},this.closeBtnClass),"tablet"===this.device?"desktop":this.device),i=this.rules?this.rules.size[i]:this.size;window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px")),Object(l.e)({player:this.playerContainerDiv,location:"top",stickyH:i[1],stickyW:i[0]})}},{key:"undockVideo",value:function(){this.placeScript&&this.placeScript();var e="".concat(this.initialW,"px"),i="".concat(this.initialH,"px");this.isTopDocked=!1,window.Bolt&&window.Bolt.resizeVideo(this.playerId,e,i),Object(l.j)(this.playerContainerDiv,"mobileTop"),this.containerDiv.style.height=i,this.containerDiv.style.width=e,this.containerDiv.style.maxHeight=i,this.containerDiv.style.maxWidth=e}}]),e}()},OqRl:function(e,i,t){"use strict";t.d(i,"a",function(){return l});var i=t("lwsE"),o=t.n(i),i=t("W8MJ"),n=t.n(i),s=t("Am97"),r=t("YfMo"),l=function(){function e(){o()(this,e)}return n()(e,[{key:"init",value:function(i){if(i.rules.location.x||"top"!==i.rules.location.y||"desktop"!==i.device){i.dock=this.dock.bind(i),i.undock=this.undock.bind(i);var e=document.querySelector(i.rules.paragraphContainer);if(null===e)r.b.error("No container found",{paragraphContainer:i.rules.paragraphContainer});else{!0===i.rules.clearContentArea&&(t=window.ramp.settings,o=e.querySelectorAll(t.isMobile?"[data-pw-mobi]":"[data-pw-desk]"),[].forEach.call(o,function(e){void 0!==t.slots[e.id]&&void 0!==t.slots[e.id].slot&&window.googletag.cmd.push(function(){window.googletag.destroySlots([t.slots[e.id].slot]),delete t.slots[e.id]}),e.parentNode.removeChild(e)}));var t,o=e.querySelectorAll(i.rules.paragraphRecognition);if(0===o.length)r.b.error("No selector found",{paragraphRecognition:i.rules.paragraphRecognition});else{i.isDocked=!1,i.isInContent=!0;e=document.createElement("div");if(e.id="tyche_trendi_parent_container","responsive"===i.embedSize?(e.style.width="100%",e.style.position="relative",e.style.paddingTop="56.25%",e.style.marginTop="-56.25%",e.style.marginBottom="56.25%",i.containerDiv.style.maxWidth="100%",i.containerDiv.style.position="absolute"):(e.style.width="".concat(i.embedSize[0],"px"),e.style.height="".concat(i.embedSize[1],"px"),e.style.margin="0 auto"),i.containerDiv.style.width="100%",i.containerDiv.style.height="100%",(i.anchorDiv=e).appendChild(i.containerDiv),0===i.rules.insertInto)o[0].insertAdjacentElement("beforebegin",i.anchorDiv);else try{o[i.rules.insertInto-1].insertAdjacentElement(i.rules.embedPosition||"afterend",i.anchorDiv)}catch(e){return void r.b.error("No selector found",{matches:o.length,insertLocation:i.rules.insertInto})}"top"===i.rules.location.y&&(i.closeBtnClass="pw-close-btn-top"),i.alterFonts&&i.alterFonts(i.anchorDiv.getBoundingClientRect().width);e="responsive"===i.embedSize?0:void 0;i.observer=Object(s.g)(i.anchorDiv,this.undock.bind(i),this.dock.bind(i),i,e)}}}}},{key:"dock",value:function(){var e,i=this;Object(s.c)(this),!0===this.wasViewed&&!0===this.rules.sticky&&(this.isDocked=!0,this.placeScript&&this.placeScript(),this.adIsPlaying||!1===this.slideShowStarted||Object(s.a)(this.containerDiv,function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(i.playerId),"mrss"!==i.rules.content&&window.Bolt.pauseMedia(i.playerId),i.observer&&i.observer.unobserve(i.observedElement),i.undock()},this.closeBtnClass),this.containerDiv.style.height="100%",this.containerDiv.style.backgroundColor="rgba(0, 0, 0, 0.9)","responsive"===this.embedSize&&window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px")),e=this.rules.location.x?"".concat(this.rules.location.x,"-").concat(this.rules.location.y):this.rules.location.y,e={player:this.containerDiv,location:e,stickyH:this.size[1],stickyW:this.size[0]},this.alterFonts&&this.alterFonts(this.size[0]),Object(s.e)(e,this))}},{key:"undock",value:function(){var e,i;this.wasViewed=!0,this.placeScript&&this.placeScript(),!1!==this.isDocked&&(this.isDocked=!1,this.containerDiv.classList.remove("is-docked"),Object(s.d)(),e=(i=this.containerDiv.style).visibility,i=i.opacity,this.containerDiv.removeAttribute("style"),this.containerDiv.style.visibility=e,this.containerDiv.style.opacity=i,this.containerDiv.style.height="100%",this.containerDiv.style.width="100%",i=9*(e=this.anchorDiv.getBoundingClientRect().width)/16,this.alterFonts&&this.alterFonts(e),"responsive"===this.embedSize&&(window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(e,"px"),"".concat(i,"px")),this.containerDiv.style.maxWidth="100%",this.containerDiv.style.position="absolute"))}}]),e}()},o3b6:function(e,i,t){"use strict";t.d(i,"a",function(){return r});var i=t("lwsE"),o=t.n(i),i=t("W8MJ"),n=t.n(i),s=t("Am97"),r=function(){function e(){o()(this,e)}return n()(e,[{key:"init",value:function(e){e.dock=this.dock.bind(e),e.undock=this.undock.bind(e);var i,t=document.querySelector(e.rules.selector);t&&(e.isDocked=!1,e.isInContent=!0,(i=document.createElement("div")).id="tyche_trendi_parent_container","responsive"===e.embedSize?(i.style.width="100%",i.style.position="relative",i.style.paddingTop="56.25%",i.style.marginTop="-56.25%",i.style.marginBottom="56.25%",e.containerDiv.style.maxWidth="100%",e.containerDiv.style.position="absolute"):(i.style.width="".concat(e.embedSize[0],"px"),i.style.height="".concat(e.embedSize[1],"px"),i.style.margin="0 auto"),e.containerDiv.style.width="100%",e.containerDiv.style.height="100%",(e.anchorDiv=i).appendChild(e.containerDiv),t.insertAdjacentElement(e.rules.embedPosition,e.anchorDiv),i="responsive"===e.embedSize?0:void 0,e.observer=Object(s.g)(e.anchorDiv,this.undock.bind(e),this.dock.bind(e),e,i))}},{key:"dock",value:function(){var e=this;if(Object(s.c)(this),!0===this.wasViewed&&!0===this.rules.sticky){if(this.isDocked=!0,this.placeScript&&this.placeScript(),"sidebar"===this.rules.location.y){var i=this.anchorDiv.getBoundingClientRect();if(0<i.top)return;i={player:this.containerDiv,location:"sidebar",stickyH:i.height,stickyW:i.width};return this.rules.navHeight&&(i.navHeight=this.rules.navHeight),void Object(s.e)(i)}"responsive"===this.embedSize&&window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px")),this.adIsPlaying||Object(s.a)(this.containerDiv,function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(e.playerId),window.Bolt.pauseMedia(e.playerId),e.observer&&e.observer.unobserve(e.observedElement),e.undock()},this.closeBtnClass);i={player:this.containerDiv,location:"".concat(this.rules.location.x,"-").concat(this.rules.location.y),stickyH:this.size[1],stickyW:this.size[0]};Object(s.e)(i)}}},{key:"undock",value:function(){this.wasViewed=!0,this.placeScript&&this.placeScript(),!1!==this.isDocked&&(this.isDocked=!1,Object(s.j)(this.containerDiv),"responsive"===this.embedSize&&(this.containerDiv.style.position="absolute"))}}]),e}()}}]);