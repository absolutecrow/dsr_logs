(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{113:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var i=n(15),r=n(3),a=n(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=new a.a("AD-REQUEST"),g=new a.a("LOG-INSIGHTS"),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,n,i,a=c(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),v(u(e=a.call(this)),"failed",!1),v(u(e),"data",{}),e}return t=o,(n=[{key:"setMedia",value:function(e,t){this.data.media_src=e,this.data.mime_type=t}},{key:"start",value:function(e,t,n,i){var a=this,o=a.data.campaign_id;g.info("Ad request started",{groupName:"2-AdServer",requestUrl:e,thirdPartyTag:t,dcCount:n,bid:i,campaignId:o}),a.reset(),a.data={campaign_id:o,tag:e,third_party_tag:t,daisy_chain_count:n,start_ts:new Date},this._dispatchEvent(r.a.Ad.Event.REQUEST_START,a.data)}},{key:"getElapsedSecondsSinceStart",value:function(e){try{var t=(e.getTime()-this.data.start_ts.getTime())/1e3;return parseFloat(t.toFixed(1))}catch(e){return-1}}},{key:"success",value:function(){var e=this,t=new Date,n={timestamp:t,media_src:e.data.media_src,mime_type:e.data.mime_type,ad_type:e.data.ad_type,network:e.data.network,campaign_id:e.data.campaign_id,et_request_start:e.getElapsedSecondsSinceStart(t),et_session_start:window.AdSession.getElapsedSecondsSinceStart(t)};this._dispatchEvent(r.a.Ad.Event.REQUEST_SUCCESS,n)}},{key:"fail",value:function(e){var t=this,n=new Date;if(!t.failed){t.failed=!0;var i={timestamp:n,media_src:t.data.media_src,mime_type:t.data.mime_type,ad_type:t.data.ad_type,info:e,network:t.data.network,campaign_id:t.data.campaign_id,et_request_start:t.getElapsedSecondsSinceStart(n),et_session_start:window.AdSession.getElapsedSecondsSinceStart(n)};t._dispatchEvent(r.a.Ad.Event.REQUEST_FAIL,i)}}},{key:"abort",value:function(){var e=this,t=new Date,n={timestamp:t,media_src:e.data.media_src,mime_type:e.data.mime_type,ad_type:e.data.ad_type,network:e.data.network,campaign_id:e.data.campaign_id,et_request_start:e.getElapsedSecondsSinceStart(t),et_session_start:window.AdSession.getElapsedSecondsSinceStart(t)};e._dispatchEvent(r.a.Ad.Event.REQUEST_ABORT,n)}},{key:"reset",value:function(){var e;this.data&&this.data.campaign_id&&(e=this.data.campaign_id),this.failed=!1,this.data={},window.BoltAdManager&&window.BoltAdManager.selectedServer&&(this.data.campaign_id=e)}},{key:"adType",get:function(){return this.data.ad_type},set:function(e){this.data.ad_type=e}},{key:"network",get:function(){return this.data.network},set:function(e){this.data.network=e}},{key:"campaignId",get:function(){return this.data.campaign_id},set:function(e){try{this.data.campaign_id=e}catch(e){}h.info("CAMPAIGN ID",this.data.campaign_id)}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a)},114:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var i=n(15),r=n(1),a=n(3),o=n(0);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=new r.a("SS-TRACKER"),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,n,i,r=l(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),h(p(e=r.call(this)),"videoId",null),h(p(e),"publisherId",null),h(p(e),"tag",null),h(p(e),"timing",null),h(p(e),"started",!1),h(p(e),"aborted",!1),h(p(e),"loaded",!1),h(p(e),"failed",!1),h(p(e),"data",{}),e}return t=d,(n=[{key:"start",value:function(e){e.timing&&e.tag&&e.serverType?this.started?g.warn("SSTRacker has already been started"):(this.started=!0,this.tag=e.tag,this.data={timing:e.timing,tag:e.tag,vmap:e.vmap,publisher_id:Object(o.i)()||-1,video_id:window.CurrentVideoConfig.content.videoId||-1,start_ts:new Date,server_type:e.serverType},this._dispatchEvent(a.a.Ad.Event.SS_REQUESTED,this.data)):g.error("Invalid SS tracker data")}},{key:"fail",value:function(){this.tag?this.started?(this.failed=!0,g.info("event: failed"),this._dispatchEvent(a.a.Ad.Event.SS_FAILED,this.data)):g.error("has not started"):g.warn("No self-service tag")}},{key:"success",value:function(){this.tag?this.started?(this.loaded=!0,g.info("event: success"),this._dispatchEvent(a.a.Ad.Event.SS_LOADED,this.data)):g.error("has not started"):g.warn("No self-service tag")}},{key:"backfill",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e,this._dispatchEvent(a.a.Ad.Event.SS_BACKFILL_REQUESTED,this.data)):g.error("did not fail"):g.error("has not started"):g.warn("No self-service tag")}},{key:"backfillSuccess",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e||this.data.backfiller_tag,this._dispatchEvent(a.a.Ad.Event.SS_BACKFILL_SUCCESS,this.data)):g.error("did not fail"):g.error("has not started"):g.warn("No self-service tag")}},{key:"backfillFail",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e||this.data.backfiller_tag,this._dispatchEvent(a.a.Ad.Event.SS_BACKFILL_FAILED,this.data)):g.error("did not fail"):g.error("has not started"):g.warn("No self-service tag")}},{key:"reset",value:function(){g.debug("reset"),this.tag=null,this.timing=null,this.started=!1,this.aborted=!1,this.loaded=!1,this.failed=!1,this.data={}}},{key:"recordImpression",value:function(){var e={timing:this.data.timing,video_id:this.data.video_id,publisher_id:this.data.publisher_id,tag:this.data.tag,vmap:this.data.vmap,server_type:this.data.server_type,start_ts:this.data.start_ts};this._dispatchEvent(a.a.Ad.Event.SS_IMPRESSION,e)}}])&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.a)},133:function(e,t,n){"use strict";n.r(t);var i=n(15),r=n(1),a=n(0),o=n(3),d=n(4),s=n(10),c=n(11);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){var t=[],n=null;return e.forEach((function(i,r){if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){var a=e[r-1];if(a&&a.sequence===i.sequence-1)return void(n&&n.push(i));delete i.sequence}n=[i],t.push(n)})),t}function p(e){var t=[];if(e.forEach((function(e){var n,i={id:e.getAttribute("id")||null,adId:b(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},r=S(e,"UniversalAdId");for(var a in r&&(n={idRegistry:r.getAttribute("idRegistry")||"unknown",value:w(r)}),e.childNodes){var o=e.childNodes[a],d=void 0;switch(o.nodeName){case"Linear":d=g(o,i);break;case"NonLinearAds":d=h(o,i)}d&&(n&&(d.universalAdId=n),t.push(d))}})),!t.length)throw new s.a("There is no Creatives element.",101);return t}function v(e){var t=[];return e.forEach((function(e){var n=function e(t){if("#comment"===t.nodeName)return null;var n={name:null,value:null,attributes:{},children:[]},i=t.attributes,r=t.childNodes;if(n.name=t.nodeName,t.attributes)for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.nodeName&&o.nodeValue&&(n.attributes[o.nodeName]=o.nodeValue)}for(var d in r)if(r.hasOwnProperty(d)){var s=e(r[d]);s&&n.children.push(s)}if(0===n.children.length||1===n.children.length&&["#cdata-section","#text"].indexOf(n.children[0].name)>=0){var c=w(t);""!==c&&(n.value=c),n.children=[]}return l=n,null===l.value&&0===Object.keys(l.attributes).length&&0===l.children.length?null:n;var l}(e);n&&t.push(n)})),t}function h(e,t){var n={id:t.id||null,adId:t.adId||null,sequence:t.sequence||null,apiFramework:t.apiFramework||null,type:"nonlinear",variations:[],trackingEvents:{}};return _(e,"TrackingEvents").forEach((function(e){var t,i;_(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),i=w(e),t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))}))})),_(e,"NonLinear").forEach((function(e){var t={id:e.getAttribute("id")||null,width:e.getAttribute("width")||0,height:e.getAttribute("height")||0,expandedWidth:e.getAttribute("expandedWidth")||0,expandedHeight:e.getAttribute("expandedHeight")||0,scalable:A(e.getAttribute("scalable")),maintainAspectRatio:A(e.getAttribute("maintainAspectRatio")),minSuggestedDuration:f(e.getAttribute("minSuggestedDuration")),apiFramework:e.getAttribute("apiFramework")||"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,adParameters:null};_(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=w(e)})),_(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=w(e)})),_(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=w(e)}));var i=S(e,"AdParameters");i&&(t.adParameters=w(i)),n.variations.push(t)})),n}function g(e,t){var n,i={id:t.id||null,adId:t.adId||null,sequence:t.sequence||null,apiFramework:t.apiFramework||null,type:"linear",duration:0,skipDelay:null,mediaFiles:[],icons:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,trackingEvents:{}};i.duration=f(w(S(e,"Duration")));var r=e.getAttribute("skipoffset");if(null==r)i.skipDelay=null;else if("%"===r.charAt(r.length-1)&&-1!==i.duration){var a=parseInt(r,10);i.skipDelay=i.duration*(a/100)}else i.skipDelay=f(r);var o=S(e,"VideoClicks");if(o){var d=S(o,"ClickThrough");i.videoClickThroughURLTemplate=d?w(d):null,_(o,"ClickTracking").forEach((function(e){i.videoClickTrackingURLTemplates.push(w(e))}))}var s=S(e,"AdParameters");s&&(i.adParameters=w(s)),_(e,"TrackingEvents").forEach((function(e){_(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),r=w(e);if(t&&r){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(f(n)))}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r)}}))})),_(e,"MediaFiles").forEach((function(e){_(e,"MediaFile").forEach((function(e){i.mediaFiles.push(function(e){var t={id:e.getAttribute("id")||null,src:w(e)||null,fileSize:parseInt(e.getAttribute("fileSize")||0),delivery:e.getAttribute("delivery")||"progressive",type:e.getAttribute("type")||null,mediaType:e.getAttribute("mediaType")||"2D",codec:e.getAttribute("codec")||null,bitrate:parseInt(e.getAttribute("bitrate")||0),minBitrate:parseInt(e.getAttribute("minBitrate")||0),maxBitrate:parseInt(e.getAttribute("maxBitrate")||0),width:parseInt(e.getAttribute("width")||0),height:parseInt(e.getAttribute("height")||0),apiFramework:e.getAttribute("apiFramework")||null,scalable:null,maintainAspectRatio:null},n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=A(n));var i=e.getAttribute("maintainAspectRatio");i&&"string"==typeof i&&(t.maintainAspectRatio=A(i));return t}(e))}))}));var c=S(e,"Icons");return c&&_(c,"Icon").forEach((function(e){i.icons.push(function(e){var t={program:e.getAttribute("program")||null,height:parseInt(e.getAttribute("height")||0),width:parseInt(e.getAttribute("width")||0),xPosition:m(e.getAttribute("xPosition")),yPosition:y(e.getAttribute("yPosition")),apiFramework:e.getAttribute("apiFramework")||null,offset:f(e.getAttribute("offset"))||null,duration:f(e.getAttribute("duration"))||0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:e.getAttribute("pxratio")||"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};_(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=w(e)})),_(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=w(e)})),_(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=w(e)}));var n=S(e,"IconClicks");n&&(t.iconClickThroughURLTemplate=w(S(n,"IconClickThrough")),_(n,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:w(e)})})));return t.iconViewTrackingURLTemplate=w(S(e,"IconViewTracking")),t}(e))})),i}function f(e){if(null==e)return-1;if(!isNaN(parseFloat(e))&&isFinite(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var n=t[2].split("."),i=parseInt(n[0]);2===n.length&&(i+=parseFloat("0.".concat(n[1])));var r=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(r)||isNaN(i)||r>3600||i>60?-1:a+r+i}function m(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}function y(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}function b(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}function w(e){return e&&(e.textContent||e.text||"").trim()}function A(e){return-1!==["true","TRUE","True","1"].indexOf(e)}function _(e,t){var n=[],i=e.childNodes;for(var r in i){var a=i[r];a.nodeName===t&&n.push(a)}return n}function S(e,t){var n=e.childNodes;for(var i in n){var r=n[i];if(r.nodeName===t)return r}}function k(e,t,n){var i=t.getAttribute(e);i&&n.setAttribute(e,i)}function T(e){var t,n=e.childNodes,i=function(e){for(var t=e.attributes,n={},i=0;i<t.length;i++)n[t[i].nodeName]=t[i].nodeValue;return n}(e);try{t=parseInt(i.sequence,10)}catch(e){throw new s.a("Cannot parse sequence attribute from Ad",101)}var r={id:i.id||null,sequence:t||null,adType:i.adType||null,pricing:null,adServingId:null,system:null,advertiser:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null};for(var a in n){var o=n[a];switch(o.nodeName){case"Error":r.errorURLTemplates.push(w(o));break;case"Impression":r.impressionURLTemplates.push(w(o));break;case"Creatives":r.creatives=p(_(o,"Creative"));break;case"Extensions":var d=_(o,"Extension");r.extensions=v(d);break;case"AdSystem":r.system={value:w(o),version:o.getAttribute("version")||null};break;case"AdTitle":r.title=w(o);break;case"Pricing":r.pricing={model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null,value:w(o)};break;case"AdServingId":r.adServingId=w(o)}}return r}function E(e){var t=T(e),n=e.getAttribute("allowMultipleAds"),i=e.getAttribute("fallbackOnNoAd"),r=e.getAttribute("followAdditionalWrappers");t.allowMultipleAds=!!n&&A(n),t.fallbackOnNoAd=i?A(i):null,t.followAdditionalWrappers=!r||A(r);var a=S(e,"VASTAdTagURI");if(a?t.nextWrapperURL=w(a):(a=S(e,"VASTAdTagURL"))&&(t.nextWrapperURL=w(S(a,"URL"))),!t.nextWrapperURL)throw new s.a("Wrapper does not contain next URL",300);return t.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){t.trackingEvents||(t.trackingEvents={}),t.trackingEvents[e.type]||(t.trackingEvents[e.type]={});var n=function(n){var i=e.trackingEvents[n];Array.isArray(t.trackingEvents[e.type][n])||(t.trackingEvents[e.type][n]=[]),i.forEach((function(i){t.trackingEvents[e.type][n].push(i)}))};for(var i in e.trackingEvents)n(i)}e.videoClickTrackingURLTemplates&&(Array.isArray(t.videoClickTrackingURLTemplates)||(t.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){t.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(t.videoCustomClickURLTemplates)||(t.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){t.videoCustomClickURLTemplates.push(e)})))}})),t}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.allowMultipleAds;return!1===n&&e.getAttribute("sequence")?null:T(e)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.allowMultipleAds,i=t.followAdditionalWrappers,r=e.childNodes;for(var a in r){var o=r[a];if(-1!==["Wrapper","InLine"].indexOf(o.nodeName)&&("Wrapper"!==o.nodeName||!1!==i)){if(k("id",e,o),k("sequence",e,o),k("adType",e,o),"Wrapper"===o.nodeName)return{ad:E(o),type:"WRAPPER"};if("InLine"===o.nodeName)return{ad:P(o,{allowMultipleAds:n}),type:"INLINE"}}}}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=100,this.URLTemplateFilters=[],this.parsingOptions={},this.vastVersion=null}var t,n,i;return t=e,(n=[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,i=void 0===n?null:n,r=t.resolveAll,a=void 0===r||r,o=t.wrapperSequence,d=void 0===o?null:o,s=t.previousUrl,c=void 0===s?null:s,l=t.wrapperDepth,p=void 0===l?0:l,v=t.isRootVAST,h=void 0!==v&&v,g=t.followAdditionalWrappers,f=t.allowMultipleAds,m=void 0===f||f,y=[];try{y=this.parseVastXml(e,{isRootVAST:h,url:i,wrapperDepth:p,allowMultipleAds:m,followAdditionalWrappers:g})}catch(e){return Promise.reject(e)}return 1===y.length&&null!=d&&(y[0].sequence=d),!1===a&&(this.remainingAds=u(y),y=this.remainingAds.shift()),this.resolveAds(y,{wrapperDepth:p,previousUrl:c,url:i}).then((function(e){return e&&e.length>0&&e[0].creatives&&e[0].creatives.length<=0&&!e[0].errorCode&&(ad.errorCode=303,ad.errorMessage="No Ads in VAST response after one or more Wrappers."),e}))}},{key:"parseVastXml",value:function(e,t){var n=t.isRootVAST,i=void 0!==n&&n,r=t.allowMultipleAds,a=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw new s.a("Invalid VAST XMLDocument",100);if(!e.documentElement.hasChildNodes()&&!i)throw new s.a("Empty VAST response after one or more Wrappers.",303);var o=[],d=e.documentElement.childNodes,l=e.documentElement.getAttribute("version");for(var u in i&&l&&(this.vastVersion=l,Object(c.e)("vastVersion",l)),d){var p=d[u];if("Error"===p.nodeName){var v=w(p);i?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===p.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)r=!0;else if(!1===r&&o.length>1)break;var h=C(p,{allowMultipleAds:r,followAdditionalWrappers:a});if(!h.ad)throw new s.a("Parsing VAST error",102);o.push(h.ad)}}return o}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,i=n.wrapperDepth,r=n.previousUrl,o=n.url,d=[];return r=o,t.forEach((function(t){var n=e.resolveWrappers(t,i,r);d.push(n)})),Promise.all(d).then((function(t){var n=Object(a.e)(t);if(!n&&e.remainingAds.length>0){var d=e.remainingAds.shift();return e.resolveAds(d,{wrapperDepth:i,previousUrl:r,url:o})}return n}))}},{key:"resolveWrappers",value:function(e,t,n){var i=this;return new Promise((function(r){var o;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,r(e);if(t>=i.maxWrapperDepth||-1!==i.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,e.errorMessage="Wrapper limit reached, as defined by the video player",delete e.nextWrapperURL,r(e);e.nextWrapperURL=function(e,t){if(e=Object(a.E)(e),!t)return e;if(0===e.indexOf("//")){var n=location.protocol;return"".concat(n).concat(e)}if(-1===e.indexOf("://")){var i=t.slice(0,t.lastIndexOf("/"));return"".concat(i,"/").concat(e)}return e}(e.nextWrapperURL,n),i.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var d=null!==(o=i.parsingOptions.allowMultipleAds)&&void 0!==o?o:e.allowMultipleAds,s=e.sequence;i.fetchVAST(e.nextWrapperURL).then((function(a){return i.parse(a,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:d}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],r(e);t.forEach((function(t){t&&function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,i=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var a=t.trackingEvents[e.type][r];Array.isArray(e.trackingEvents[r])||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(a)}"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),i&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate))}))}(t,e)})),r(t)}))})).catch((function(t){t&&408===t.status?(e.errorCode=301,e.errorMessage=t.responseText):(e.errorCode=e.errorCode||t&&t.code||300,e.errorMessage=e.errorMessage||t&&(t.responseText||t.message)||"General Wrapper error"),r(e)}))}))}},{key:"fetchVAST",value:function(e){return this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.parentURLs.push(e),function(e){return new Promise((function(t,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){200===i.status||204===i.status?t(i.responseText):n(i)},i.onerror=function(){return n(i)},i.send()}))}(e).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")}))}}])&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=n(9),I=n.n(O);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,d=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){d=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(d)throw r}}return a}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=new r.a("VAST-MAP");function j(e,t){var n=this;this.events={},this.ad=t;for(var i=function(){var e=D(a[r],2),t=e[0],i=e[1],o=t,d=null;t.includes("progress")&&(o="progress",d=t.split("-")[1]),n.events[o]=n.events[o]||[],i.forEach((function(e){var t={url:e,event:o};d&&(t.offset=d),n.events[o].push(t)}))},r=0,a=Object.entries(e.trackingEvents);r<a.length;r++)i()}function U(e,t){if(this.events={},this.ad=t,null!==e){if("TrackingEvents"!==e.tagName&&"vmap:TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}var n=e.getElementsByTagName("Tracking");0===n.length&&(n=e.getElementsByTagNameNS("*","Tracking"));for(var i=0;i<n.length;i++){var r=n[i].getAttribute("event");if(r){var a=null;"progress"===r&&(a=n[i].getAttribute("offset"),r+="-".concat(a)),this.events[r]=this.events[r]||[];var o={url:n[i].textContent.replace(/\s/g,""),offset:a,event:r};this.events[r].push(o)}}}}function N(e,t){var n=this;this.onAdsAvailable=t,this.isAdFallbackMode=!1,this.vastParser=new M,this.vastParser.parse(e,{isRootVAST:!0}).then((function(e){if(!e||e.length<=0)throw new s.a("Empty VAST received",303);if(n.ads=[],n.isAdPod=!1,n.id=e&&e.length>0?e[0].id:null,n.allErrorURLTemplates=[].concat(L(e[0].errorURLTemplates),L(n.vastParser.rootErrorURLTemplates)),e.forEach((function(e){if(e.errorCode)return Object(s.c)({code:e.errorCode,message:e.errorMessage||"Vast parsing error",urls:n.allErrorURLTemplates}),void(n.onAdsAvailable&&(n.onAdsAvailable.call(null),n.onAdsAvailable=null));var t=new F(e);t.isEmpty()||(null===t.sequence||n.isAdPod||(n.isAdPod=!0,n.currentIndex=null),n.ads.push(t))})),n.onAdsAvailable&&n.ads.length>0){var t=n.ads.find((function(e){return e.hasData()}));if(!t)throw new s.a("Video player received an Ad type that cannot be played",200);var i=n.onAdsAvailable;n.onAdsAvailable=null;try{i.call(n,n,t.adCPM||t.pricing)}catch(e){x.error("Catch error during calling CB function in VASTAds")}}})).catch((function(e){e instanceof s.a?Object(s.c)({code:e.code,message:e.message,urls:n.vastParser.rootErrorURLTemplates}):x.error("Error catch during VAST parsing ".concat(e&&e.message)),t&&t.call(null)}))}function F(e){var t,n,i,r=this;if(this.uuid=I()(),this.hasContent=(null==e||null===(t=e.creatives)||void 0===t?void 0:t.length)>0,this.loaded=!0,this.sequence=(null==e?void 0:e.sequence)||null,this.adCPM=null,this.pricing=null==e?void 0:e.pricing,this.linear=null,this.nonlinears=[],this.nonlinearsTracking=null,this.impressions=Object(a.o)(e&&e.impressionURLTemplates||[]),this.currentPodAd=this,this.sentImpression=!1,this.errorUrlTemplates=e&&e.errorURLTemplates,this.properties={AdSystem:null==e||null===(n=e.system)||void 0===n?void 0:n.value,AdTitle:null==e?void 0:e.title},e.creatives.forEach((function(e){if("linear"===e.type){if(r.linear)return;r.linear=new W(e,r)}})),(null==e||null===(i=e.extensions)||void 0===i?void 0:i.length)>0){var o,d=e.extensions.find((function(e){var t,n;return"lr-pricing"===(null==e||null===(t=e.attributes)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.toLowerCase())})),s=null==d||null===(o=d.children)||void 0===o?void 0:o.find((function(e){return"price"===e.name.toLowerCase()}));try{this.adCPM=parseFloat(s.value)||0}catch(e){x.error("Cannot parse Price value from Extension node")}}}function q(e,t){this.root=e,this.clickThrough=e.videoClickThroughURLTemplate,this.tracking=new j(e,t)}function W(e,t){var n=this;q.call(this,e,t),this.mediaFiles=L(e.mediaFiles),this.duration=e.duration,this.skipDelay=e.skipDelay,this.icons=[],e.icons&&e.icons.length>0&&e.icons.forEach((function(e){n.icons.push(new G(e))})),e.videoClickTrackingURLTemplates&&e.videoClickTrackingURLTemplates.length&&e.videoClickTrackingURLTemplates.forEach((function(e){n.tracking.addClickTracking(e)})),this.parameters=null,e.adParameters&&(this.parameters=e.adParameters,window.site.isSecure&&(x.info("Normalizing all protocols in AdParameters"),x.info("Ad Parameters BEFORE normalisation:",this.parameters.concat()),this.parameters=this.parameters.replace(/http:/gi,"https:").replace(/http%3A/gi,"https%3A"),x.info("Ad Parameters AFTER normalisation:",this.parameters)))}function G(e){this.staticResource=e.staticResource,this.htmlResource=e.htmlResource,this.iframeResource=e.iframeResource,this.offset=e.offset,this.duration=e.duration,this.iconViewTrackingURLTemplate=e.iconViewTrackingURLTemplate,this.iconClickThroughURLTemplate=e.iconClickThroughURLTemplate,this.iconClickTrackingURLTemplates=[],e.iconClickTrackingURLTemplates&&e.iconClickTrackingURLTemplates.length>0&&this.iconClickTrackingURLTemplates.push(e.iconClickTrackingURLTemplates)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Y(e);if(t){var r=Y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}j.prototype.finger=function(e){var t=Object(a.E)(e),n=Object(a.y)(t);(new Image).src=n,x.info("Image tracking pixel loaded: ".concat(n))},j.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},j.prototype.getEventsOfTypes=function(e){var t=[],n=e.indexOf("progress")>-1;for(var i in this.events)this.events.hasOwnProperty(i)&&(e.indexOf(i)>-1||n&&0===i.indexOf("progress-"))&&(t=t.concat(this.events[i]));return t},j.prototype.track=function(e,t,n){var i=n&&n.trackingEvent?n.trackingEvent:this.events[e];if(i&&0!==i.length){t||(t={});var r,a=[].concat(i);for(var o in t)t.hasOwnProperty(o)&&(t["[".concat(o,"]")]=encodeURIComponent(t[o]),delete t[o]);for(r=0;r<a.length;r++){var s=a[r].url;for(o in t["[CACHEBUSTING]"]=Object(d.a)(),t)t.hasOwnProperty(o)&&(s=s.replace(o,t[o]));""!==s&&"about:blank"!==s&&(x.debug("tracking",e,s),this.finger(s))}}},j.prototype.trackProgressEvent=function(e,t){this.track(null,t,{trackingEvent:e})},j.prototype.trackImpressions=function(){x.debug("Tracking impressions for ad");var e,t,n=this.ad;if(n&&!n.hasSentImpression())for(n.impressionSent(),e=0;e<n.impressions.length;e++)""!==(t=n.impressions[e])&&"about:blank"!==t&&(x.debug("Track impression",t),this.finger(t))},U.prototype.copy=function(e){var t=Object.create(U.prototype);for(var n in t.events={},this.events)this.events.hasOwnProperty(n)&&(t.events[n]=[].concat(this.events[n]));return t.ad=e,t},U.prototype.finger=function(e,t){var n=Object(a.E)(e),i=document.getElementById("bolt_trackingpixels"),r=Object(a.y)(n),o=document.createElement("img");o.setAttribute("style","position:absolute;bottom:0;left:0;visibility:hidden"),o.src=r,i.appendChild(o),x.info("Image tracking pixel loaded: ".concat(n))},U.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},U.prototype.getEventsOfTypes=function(e){var t=[],n=e.indexOf("progress")>-1;for(var i in this.events)this.events.hasOwnProperty(i)&&(e.indexOf(i)>-1||n&&0===i.indexOf("progress-"))&&(t=t.concat(this.events[i]));return t},U.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){t||(t={});var n,i=[].concat(this.events[e]);for(var r in t)t.hasOwnProperty(r)&&(t["[".concat(r,"]")]=encodeURIComponent(t[r]),delete t[r]);for(n=0;n<i.length;n++){var a=i[n].url;for(r in t["[CACHEBUSTING]"]=Object(d.a)(),t)t.hasOwnProperty(r)&&(a=a.replace(r,t[r]));""!==a&&"about:blank"!==a&&(x.debug("tracking",e,a),this.finger(a,e))}}},U.prototype.trackImpressions=function(){x.debug("tracking impressions for ad");for(var e,t,n=this.ad;null!=n&&!n.hasSentImpression();){for(n.impressionSent(),e=0;e<n.impressions.length;e++)""!==(t=n.impressions[e])&&"about:blank"!==t&&(x.debug("Track impression",t),this.finger(t,"impression"));x.debug("Backtracking to parent ad, if any"),n=n.parentAd}},N.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdByIndex(1))&&!t.current().isEmpty())return this.currentIndex=1,t.current();for(var n=0;n<this.ads.length;n++)if(!this.ads[n].hasSequence()&&!this.ads[n].current().isEmpty())return this.ads[n].current()},N.prototype.getCurrentIndex=function(){return this.currentIndex},N.prototype.getNextAd=function(){if(!this.isAdPod)return null;var e=(this.getCurrentIndex()||0)+1,t=this.getAdByIndex(e);return t?(this.currentIndex=e,t):null},N.prototype.getAdsCount=function(){var e=this;if(this.isAdPod){var t=function(){for(var t=0,n=1;;){if(!e.ads.find((function(e){return e.sequence===n})))break;t++,n++}return{v:t}}();if("object"===R(t))return t.v}if(this.ads.length>0)return 1},N.prototype.getAdByIndex=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},N.prototype.getFallbackAd=function(){for(var e=0;e<this.ads.length;e++)if(!this.ads[e].hasSequence())return this.ads[e];return null},F.prototype.hasSentImpression=function(){return this.sentImpression},F.prototype.impressionSent=function(){this.sentImpression=!0},F.prototype.current=function(){return this.currentPodAd},F.prototype.isNumber=function(e){return this.sequence===e},F.prototype.hasSequence=function(){return null!==this.sequence},F.prototype.isEmpty=function(){return!this.hasContent},F.prototype.hasData=function(){return this.loaded&&this.linear},q.prototype.track=function(e,t,n){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:n})},q.prototype.trackImpressions=function(e){this.tracking.trackImpressions()},q.prototype.trackProgressEvent=function(e,t,n){this.tracking.trackProgressEvent(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:n})},q.prototype.timecodeToString=function(e){var t="0".concat(parseInt(e/3600,10)),n="0".concat(parseInt(e%3600/60,10)),i="0".concat(e%60);return"".concat(t,":").concat(n,":").concat(i).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},q.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},W.prototype=Object.create(q.prototype),W.prototype.getDuration=function(){return this.duration},W.prototype.getAllMedias=function(){return this.mediaFiles},W.prototype.getAllMediaAsObject=function(){var e;return this.mediaFiles&&this.mediaFiles.forEach((function(t){e||(e={}),e[t.type]=t})),e},G.prototype.trackImpression=function(){Object(a.I)(this.iconViewTrackingURLTemplate)},G.prototype.trackClick=function(){this.iconClickTrackingURLTemplates.forEach((function(e){e&&e.length?e.forEach((function(e){Object(a.I)(null==e?void 0:e.url)})):e&&e.url&&Object(a.I)(e.url)}))},G.prototype.handleClick=function(){if(this.iconClickThroughURLTemplate){var e=Object(a.E)(this.iconClickThroughURLTemplate);window.open(e,"_bolt_advertiser").focus()}};var $=new r.a("VMAP-ADAPTER"),Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(d,e);var t,n,r,o=Q(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),e=o.call(this),(new i.a).mixin(J(e)),e}return t=d,(n=[{key:"init",value:function(e,t,n){var i=this;i.primaryTag=e,i.xml=null,i.breaks=[],i.successCb=t,i.errorCb=n,i.contentDuration=0,i.cuepoints=[],Object(a.L)({url:this.primaryTag,method:"get"}).then((function(e){i.parse(e.data)})).catch((function(){n.call(null)}))}},{key:"parse",value:function(e){var t=this;t.xml=e,t.breaks=[],t.cuepoints=[];for(var n,i,r,a,o,d=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagNameNS("*","AdBreak"),s=0;s<d.length;s++)if("linear"===(n=d.item(s)).getAttribute("breakType")){$.info("AdBreak",n);var c={position:n.getAttribute("timeOffset"),positionInSeconds:(i=n.getAttribute("timeOffset"),r=void 0,a=void 0,o=void 0,r=i.split(":"),a=window.parseInt(r[2],10),o=window.parseInt(r[1],10),3600*window.parseInt(r[0],10)+60*o+a),breakId:n.getAttribute("breakId"),sourceId:n.getElementsByTagNameNS("*","AdSource")[0].getAttribute("id"),trackingEvents:null,adXML:null,adURI:null};try{var l=n.getElementsByTagNameNS("*","TrackingEvents")[0];l&&(c.trackingEvents=new U(l,null))}catch(e){}var u=n.getElementsByTagNameNS("*","VASTAdData")[0];if(u){var p=u.getElementsByTagNameNS("*","VAST")[0];p&&(c.adXML=p)}else{var v=n.getElementsByTagNameNS("*","AdTagURI")[0];v&&(c.adURI=v.textContent.trim())}(c.adURI||c.adXML)&&("number"!=typeof c.positionInSeconds||isNaN(c.positionInSeconds)||t.cuepoints.push(c.positionInSeconds),t.breaks.push(c))}t.breaks.length>0?(t.contentDuration>0&&t.updatePercentagePosition(t.contentDuration),t.successCb.call(null,t.breaks)):($.warn("No ad breaks found"),t.errorCb.call(null))}},{key:"getBreaks",value:function(e){var t=this,n=[];if(!t.breaks||0===t.breaks.length)return null;for(var i=t.breaks.concat();i.length>0;){var r=i.shift();"preroll"===e?"start"===r.position&&n.push(r):"postroll"===e?"end"===r.position&&n.push(r):r.positionInSeconds===Math.floor(e)&&n.push(r)}return n.length>0?n:null}},{key:"setContentDuration",value:function(e,t){this.contentDuration=e,this.breaks&&this.breaks.length>0&&(this.updatePercentagePosition(e),t&&t.call(null,this.cuepoints))}},{key:"updatePercentagePosition",value:function(e){var t=this;e&&t.breaks&&t.breaks.length>0&&(t.breaks.forEach((function(t){t.position.indexOf("%")>-1&&(t.positionInSeconds=Math.floor(e*parseFloat(t.position)/100))})),t.validateBreakTimings(e))}},{key:"validateBreakTimings",value:function(e){$.info("Validate VMAP break timings");var t=this;e&&t.breaks&&t.breaks.length>0&&(t.breaks=t.breaks.filter((function(t){return"start"===t.position||"end"===t.position||e-t.positionInSeconds>30})),t.updateCuepoints())}},{key:"updateCuepoints",value:function(){var e=this;e.breaks&&e.breaks.length>0&&e.breaks.forEach((function(t){"number"!=typeof t.positionInSeconds||isNaN(t.positionInSeconds)||e.cuepoints.push(t.positionInSeconds)})),e.cuepoints=Object(a.C)(Object(a.o)(e.cuepoints)),$.info("VMAP CUEPOINTS",e.cuepoints)}},{key:"reset",value:function(){this.breaks=null,this.successCb=null,this.errorCb=null,this.primaryTag=null,this.xml=null,this.contentDuration=0,this.cuepoints=null}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.a);function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var te=new r.a("SERVER"),ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t.type,this.tags=t.tags,this.type===o.a.Ad.Server.SPOTX?this.maxAttempts=3:this.type===o.a.Ad.Server.DFP?this.maxAttempts=2:(this.type===o.a.Ad.Server.DISPLAY_BACKFILL||(this.type,o.a.Ad.Server.HOUSE_AD),this.maxAttempts=1),this.tagType=this._findTagTypeForSite(),this.tagType?"syndication"===this.tagType?this.siteTags=this.tags.default:this.siteTags=this.tags[this.tagType]:this.siteTags=null,this.type!==o.a.Ad.Server.SPOTX&&this.type!==o.a.Ad.Server.SPOTX_SDK||(this.spotxChannelId=this._getSpotxChannelId(),window.spotxChannelId=this.spotxChannelId)}var t,n,i;return t=e,(n=[{key:"selectTag",value:function(e){var t=null;if(window.tagTestUrl&&window.googleIma)return window.tagTestUrl;try{te.info("Search tag",{timing:e,tags:this.siteTags}),this.siteTags&&this.siteTags.html5&&(window.client.isMobile&&this.siteTags.html5.mobile?t=this.siteTags.html5.mobile[e]:this.siteTags.html5.desktop&&(t=this.siteTags.html5.desktop[e]))}catch(e){te.warn("Caught Error",{message:e.message,stack:e.stack})}return!t||0!==t.indexOf("//")&&0!==t.indexOf("http://")||(t=t.replace(/(http\:\/\/|\/\/)/gi,"https://")),t}},{key:"_findTagTypeForSite",value:function(){var e=window.site.hostname,t=null;if(!this.tags)return null;try{var n=window.site.tld,i=window.PlayerSettings;if(i.forceAds&&(te.debug("Forcing Ads for ".concat(n)),window.postLogMessage("Forcing Ads for: ".concat(n))),"amp"!==window.site.hostapp&&!i.forceAds&&"ramp.playwire.com"===n)return te.warn("TLD is ".concat(n,". Ads disabled")),window.postLogMessage("TLD is ".concat(n,". Ads disabled"),"warn"),null;for(var r in this.tags){if(r===e){t=r;break}if(r===n||r==="*.".concat(n)){t=r;break}if(new RegExp("".concat(r,"$")).test(n)){t=r;break}}}catch(e){}return t?(te.debug("Found site-specific ".concat(this.type," tags"),this.tags[t]),window.postLogMessage("Found site-specific ".concat(this.type," tags matching ").concat(e)),t):(te.debug("No site-specific ".concat(this.type," tags match ").concat(e,". Using syndication tags.")),window.postLogMessage("No site-specific ".concat(this.type," tags match ").concat(e,". Using syndication tags.")),"syndication")}},{key:"_getSpotxChannelId",value:function(){try{return/#zeusdebug.*;spotxchannelid=([\d]*)/gi.exec(window.parentUrl)[1]}catch(e){}try{if(this.siteTags&&this.siteTags.html5){if(window.client.isMobile&&this.siteTags.html5.mobile)return te.info("Found SpotX Mobile ChannelID",{channelId:this.siteTags.html5.mobile.channelId}),this.siteTags.html5.mobile.channelId;if(this.siteTags.html5.desktop)return te.info("Found SpotX Desktop ChannelID",{channelId:this.siteTags.html5.desktop.channelId}),this.siteTags.html5.desktop.channelId}}catch(e){return null}}}])&&ee(t.prototype,n),i&&ee(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var re=new r.a("AD-POOL"),ae=0,oe=function(e,t,n){var i=this;i.name="overlay"===e?"Overlay":"Linear",i.timing=e,i.doneCallback=n,i.campaignId=null;var r,a=new DOMParser;i.xml=a.parseFromString(t,"text/xml");try{(r=i.xml.getElementsByTagName("Ad")[0])?i.campaignId=r.id:(r=i.xml.getElementsByTagName("BoltAdTemplate")[0])&&"google"===r.getAttribute("source")&&(i.campaignId=r.getAttribute("adid"))}catch(e){}if(r){var d=i.xml.getElementsByTagName("VAST")[0]||i.xml.getElementsByTagName("vast")[0];d?(i.type=o.a.Ad.Type.VAST,i.handleVAST()):(d=i.xml.getElementsByTagName("BoltAdTemplate")[0])&&(i.type=o.a.Ad.Type.GOOGLE,i.handleGoogleTemplate())}else i.done()};oe.prototype={handleVAST:function(){var e=this,t=e.xml.getElementsByTagName("Ad")[0],n=t.getElementsByTagName("VASTAdTagURI")[0],i="true"===t.getAttribute("overlay");if("overlay"===e.timing){if(!i)return re.warn("Requested overlay ads but received non-overlay tag",{name:e.name}),window.postLogMessage("[".concat(e.name," AdPool] Requested overlay ads but received non-overlay tag"),"error"),void e.done();e.type=o.a.Ad.Type.OVERLAY}if(e.campaignId=t.id,n){var r=n.textContent;if(-1!==r.indexOf("adotube.com")&&"preroll"!==e.timing)return re.warn("Received Adotube tag not in preroll. Try to daisy-chain.",{name:e.name}),window.postLogMessage("[".concat(e.name," AdPool] Received Adotube tag not in preroll. Try to daisy-chain."),"warn"),e.xml=null,void e.done();if(-1!==r.indexOf("delivery.vidible.tv")&&"preroll"!==e.timing)return re.warn("Received AOL tag not in preroll. Try to daisy-chain.",{name:e.name}),window.postLogMessage("[".concat(e.name," AdPool] Received AOL tag not in preroll. Try to daisy-chain."),"warn"),e.xml=null,void e.done();if(r.indexOf("coull.com")>-1&&r.indexOf("ad_type=ov")>-1&&ae>0)return e.xml=null,void e.done()}else re.info("Received a direct-campaign VAST",{name:e.name}),window.postLogMessage("[".concat(e.name," AdPool] Received a direct-campaign VAST"));re.info("Processing VAST XML"),new N(e.xml,(function(t,n){if(null==t)return e.xml=null,void e.done();e.cpm=n,e.ad=t,e.done()}))},handleGoogleTemplate:function(){var e=this;re.info("Received google template "),window.postLogMessage("[".concat(e.name," AdPool] Received a Google Template")),e.ad=e.xml,this.done()},done:function(){var e=this;e.doneCallback.call(null,{campaignId:e.campaignId,xml:e.xml,type:e.type,ad:e.ad,cpm:e.cpm})}};var de=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;n.name=t?"Overlay":"Linear",n.isOverlay=t,n._ads=[],n._triedCampaigns=[],n._size=3,n._timing=null,n._drained=!0,n._timer=null,n._timeout=!1,n._attempts=0,n.serverType=null,n.syndication=!0}var t,n,i;return t=e,(n=[{key:"updateCoullOverlayCount",value:function(e){this.isOverlay&&(ae=e)}},{key:"fill",value:function(e,t,n){var i=this;if(i.syndication=i.serverType===o.a.Ad.Server.SPOTX,i._timing!==t&&(re.info("Ad timing changed ".concat(i._timing,"->").concat(t,". Drain the pool.")),i.drain(),i._timing=t),i._drained=!1,i._timeout||i._ads.length===i._size||10===i._attempts)i.done(n);else{i._attempts++,re.info("Prefetch",{timing:t,syndication:i.syndication,attempt:i._attempts});var r=Object(a.E)(e);if(i.syndication&&(r+=";acao=*",window.PlayerSettings.customReporting&&(r+=function(){var e="";for(var t in window.PlayerSettings.customReporting)e+="&".concat(t,"=").concat(window.PlayerSettings.customReporting[t]);return e}()),i._triedCampaigns.length>0)){i._triedCampaigns=Object(a.o)(i._triedCampaigns);var d=(r=r.replace(/\;key=\d+/,"")).indexOf("ADTECH;")+"ADTECH;".length;r=d>=0?"".concat(r.slice(0,d),"key=").concat(i._triedCampaigns.join("+"),";").concat(r.slice(d+Math.abs(0))):"".concat(r,";key=").concat(i._triedCampaigns.join("+"))}var s=function(){re.info("Empty response in attempt #",i._attempts),window.postLogMessage("[".concat(i.name," AdPool] No ad from ").concat(e,".")),i.done(n)},c=function(){if(!i._drained)if(re.info("Retry tag ".concat(e)),"midroll"===i._timing)var r=setTimeout((function(){i._drained?clearTimeout(r):i.fill(e,t,n)}),5e3);else i.fill(e,t,n)},l=function(){if(window.postLogMessage("[".concat(i.name," AdPool] Fetching ").concat(r)),re.info("Fetching ".concat(r)),"preroll"!==i._timing&&"postroll"!==i._timing||i._timer||(i._timer=setTimeout((function(){i._timeout=!0}),1e4)),i.serverType===o.a.Ad.Server.GENERIC_GOOGLE){var n={type:o.a.Ad.Type.GOOGLE,ad:e};i._ads.push(n),c()}else Object(a.L)({url:r,method:"get"}).then((function(e){var n=e.data;i._drained||(n&&n.length>0?new oe(t,n,(function(e){i._drained||(e.campaignId&&i._triedCampaigns.push(e.campaignId),!i.syndication||e.ad?(e.type===o.a.Ad.Type.VAST?e.ad.getAd(!0)&&i._ads.push(e):e.type===o.a.Ad.Type.GOOGLE&&e.xml&&i._ads.push(e),c()):s())})):i.syndication?s():c())})).catch((function(){re.info("Request failed."),c()}))};if(i.syndication&&"preroll"===t){var u={};void 0!==window.CurrentVideoConfig.settings.appleITP&&(u.appleITP=window.CurrentVideoConfig.settings.appleITP),MessageChannel.sendRequest("prebid",(function(e){re.info("Headerbid data",e),e&&e.hasOwnProperty("hb_adid")&&e.hasOwnProperty("hb_bidder")&&e.hasOwnProperty("hb_val")&&e.hasOwnProperty("hb_vast")&&(r+=";kvhb_adid=".concat(e.hb_adid),r+=";kvhb_bidder=".concat(e.hb_bidder),r+=";kvhb_val=".concat(e.hb_val),r+=";sub1=".concat(e.hb_vast)),l()}),u)}else l()}}},{key:"drain",value:function(){this._drained=!0,this._ads=[],this._triedCampaigns=[],this._timing=null,this._timeout=!1,this._timer&&(clearTimeout(this._timer),this._timer=null),this._attempts=0}},{key:"refill",value:function(e,t){var n=this;n._triedCampaigns=[],n._timeout=!1,n._timer&&(clearTimeout(n._timer),n._timer=null),n._attempts=0,n.fill(e,n._timing,t)}},{key:"getAd",value:function(){return this._ads.shift()}},{key:"setSize",value:function(e){var t=this;re.info("Server type",{type:t.serverType,size:e}),window.postLogMessage("[".concat(t.name," AdPool] server type:").concat(t.serverType," . Pool size: ").concat(e)),t._size=e}},{key:"prioritizeAds",value:function(){for(var e=this,t=[],n=0,i=e._ads.length;n<i;n++)e._ads[n].cpm&&t.push(e._ads[n]);return t&&e._ads.length===t.length?t.sort((function(e,t){return t.cpm-e.cpm})):e._ads}},{key:"done",value:function(e){var t=this;re.info("Prefetch is done after",{attempts:t._attempts,ads:t._ads}),window.postLogMessage("[".concat(t.name," AdPool] Prefetch is done after ").concat(t._attempts," attempts. We have ").concat(t._ads.length," ads")),clearTimeout(t._timer),e()}},{key:"hasAds",value:function(){return this._ads.length>0}}])&&ie(t.prototype,n),i&&ie(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),se=n(8),ce=n(17),le=n(6),ue=n(29),pe=n(30);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=be(e);if(t){var r=be(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return me(this,n)}}function me(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=new r.a("SPOTX-SDK-PLAYER"),_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(d,e);var t,n,i,r=fe(d);function d(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),we(ye(n=r.call(this,e,t)),"client",void 0),we(ye(n),"creativeData",void 0),we(ye(n),"channelId",void 0),we(ye(n),"spotxScriptUrl",void 0),we(ye(n),"duration",0),we(ye(n),"currentTime",0),we(ye(n),"volume",1),we(ye(n),"buffered",0),we(ye(n),"startTime",0),we(ye(n),"hasStarted",!1),we(ye(n),"paused",!1),we(ye(n),"fullscreen",!1),we(ye(n),"metadata",null),we(ye(n),"muted",!1),we(ye(n),"sdk",void 0),we(ye(n),"_isAd",!0),we(ye(n),"timing",void 0),we(ye(n),"provider",void 0),we(ye(n),"playerWidth",void 0),we(ye(n),"playerHeight",void 0),we(ye(n),"adServer",void 0),we(ye(n),"maxAttempts",void 0),we(ye(n),"coppaEnabledOverride",void 0),we(ye(n),"containerWidth",void 0),we(ye(n),"containerHeight",void 0);var i=ye(n);i.client=window.client,i.creativeData=JSON.parse(t),i.channelId=window.spotxChannelId,i.spotxScriptUrl="//js.spotx.tv/directsdk/v1/".concat(i.channelId,".js"),i.timing=window.BoltAdManager.timing,i.provider=o.a.Ad.Provider.SPOTX,i.playerWidth=i.container.clientWidth>0?i.container.clientWidth:window.Skin.clientWidth,i.playerHeight=i.container.clientHeight>0?i.container.clientHeight:window.Skin.clientHeight,i.adServer=window.BoltAdManager.selectedServer,i.maxAttempts=i.adServer.maxAttempts,window.BoltAdManager.SpotxSdk.stickyResize=window.BoltAdManager.SpotxSdk.sdk.fillAdVideoContainer.bind(ye(n)),i.coppaEnabledOverride=!1;try{i.coppaEnabledOverride="true"===/#zeusdebug.*;coppaEnabled=(true|false)/i.exec(window.parentUrl)[1]}catch(e){}try{for(var a=i.creativeData.listing,s=0;s<a.length;s++)({campaignId:(a=a[s])[s].ad_id.split("-")[1],channelId:a[s].channel_id,channelName:a[s].client_playback.channel_name,creativeId:a[s].ad_id.split("-")[0],thirdPartyUrl:a[s].ad_system.rtb.url,title:a[s].title})}catch(e){Ae.error("Error parsing spotx listings",{message:e.message,stack:e.stack})}return n}return t=d,(n=[{key:"getCustomReportingVal",value:function(e){var t;return Object(a.z)(window.CurrentVideoConfig,"settings","customReporting")&&(t=window.CurrentVideoConfig.settings.customReporting,Object(a.z)(t,"custom[cust_pub_reporting_".concat(e.toString(),"]")))?t["custom[cust_pub_reporting_".concat(e.toString(),"]")]:""}},{key:"addMacrosToBoltLogger",value:function(e){var t,n="";for(t in e)-1===e[t].toString().indexOf("http")&&(""!==n&&(n+="<br>"),n+='<span style="color:#ccc;font-weight:bold">'.concat(t,":</span> ").concat(e[t]));window.postLogMessage("Key Values sent in request: ".concat(n),"extra")}},{key:"getCustomParamsObject",value:function(){var e=this,t=window.CurrentVideoConfig,n=Object(a.i)().toString(),i=t.hostingId?t.hostingId.toString():n,r="precontent"===window.PlayerSettings.playerType,o=!0;try{o=Object(se.f)(e.adServer.tags)}catch(e){Ae.error("Failed to determine site tag is syndicated or not",{message:e.message,stack:e.stack})}return{adunit:r?"pregame":e.timing,campaign_id:window.BoltAdManager.triedCampaigns.length?window.BoltAdManager.triedCampaigns[window.BoltAdManager.triedCampaigns.length-1]:"0.0",channel:e.channelId,content_page_url:window.site.href,player_height:"".concat(e.playerHeight,"px")||!1,player_width:"".concat(e.playerWidth,"px")||!1,cp_placement:Object(a.z)(e.adServer.siteTags,"placementIds")?e.adServer.siteTags.placementIds:[""],cust_pub_reporting_1:e.getCustomReportingVal(1),cust_pub_reporting_2:e.getCustomReportingVal(2),cust_pub_reporting_3:e.getCustomReportingVal(3),cust_pub_reporting_4:e.getCustomReportingVal(4),cust_pub_reporting_5:e.getCustomReportingVal(5),device_type:e.client.isMobile?"mobile":"desktop",hour:pe.b(),day:pe.a(),hb_bidder:Object(a.z)(window.prebidWinner,"hb_bidder")?window.prebidWinner.hb_bidder:"",hb_val:Object(a.z)(window.prebidWinner,"hb_val")?window.prebidWinner.hb_val:"",owning_pub_id:n||"",placement:Object(a.z)(e.adServer.siteTags,"placementIds")?e.adServer.siteTags.placementIds:[""],player:"bolt",pub_id:i||"",synd:o,secure:window.location.protocol.indexOf("https")>=0,vid_id:Object(a.z)(window.CurrentVideoConfig,"content","videoId")&&window.CurrentVideoConfig.content.videoId||"",vidcont_cat:Object(a.z)(window.CurrentVideoConfig,"categories")?window.CurrentVideoConfig.categories:[""],vpi:Object(se.d)().join(","),ws_id:Object(a.z)(e.adServer.siteTags,"id")?e.adServer.siteTags.id:"default"}}},{key:"adjustSpotxHBCPMs",value:function(e){return e=(e=Math.floor(window.parseInt(e,10)/100).toFixed(2)).toString().replace(".","_")}},{key:"getTokenObject",value:function(){var e,t,n=this,i=n.coppaEnabledOverride||!!Object(a.z)(n.adServer,"siteTags","coppa")&&!0===n.adServer.siteTags.coppa,r={};return i&&Ae.info("COPPA compliance required"),Object(a.z)(window.prebidWinner,"hb_vast")&&(e=window.prebidWinner.hb_vast,t=n.adjustSpotxHBCPMs(window.prebidWinner.hb_val),r.hb_vast=encodeURIComponent(e.replace(/(^\w+:|^)\/\//,"")),r.hb_val=t,r.hb_bidder=window.prebidWinner.hb_bidder,r.hb_adid=window.prebidWinner.hb_adid,"&custom[hb_bidder]=".concat(window.prebidWinner.hb_bidder,"&custom[hb_val]=").concat(t)),{TFCD:i?"1":"0"}}},{key:"loadSDKScript",value:function(){var e=this;window.BoltAdManager.SpotxSdk?(window.BoltAdManager.triedCampaigns.push(e.creativeData.ad_id||e.creativeData.listing[0].ad_id),window.BoltAdManager.triedCampaigns=window.BoltAdManager.triedCampaigns.reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),e.sdk=new window.SpotX.DirectAdOS({ados:{query_params:"price_floor=0&".concat(e.getVPI()),user:{consent:window.gdprConsents},regs:{gdpr:window.shouldReadGDPRConsents}},ad_mute:!1!==window.CurrentVideoConfig.settings.autoplay?1:0,ad_volume:!1!==window.CurrentVideoConfig.settings.autoplay?0:1,autoplay:!0,blocked_autoplay_override_mode:1,channel_id:e.channelId,content_id:window.id,content_height:e.playerHeight,content_width:e.playerWidth,contentPageUrl:window.parentBaseUrl,custom:e.getCustomParamsObject(),demand_source_timeout:1e4,hide_skin:!0,slot:window.BoltAdManager.container,token:e.getTokenObject(),video_slot:window.BoltAdManager.videoElement}),window.BoltAdManager.SpotxSdk.sdk=Object.create(e.sdk,{fillAdVideoContainer:{value:e.fillAdVideoContainer},resize:{value:e.sdk.resize}}),e.handlePrebid(),e.sdk.loadAd().then((function(t){var n=e.sdk.a.Ca;e.creativeData=e._getCreativeData(),e.environmentVars=e._getEnvironmentVars(),e.frame=e.container.querySelector('[id^="spotx_iframe_"]'),e.sdk.methods=t,e.subscribeEvents(),window.BoltAdManager._dispatchEvent(o.a.Ad.Event.READY),Ae.info("Ad Unit loaded. Methods:",t,"\nSpotX SDK: ",e.sdk,e.container,e.video),Ae.info("KVP Tokens sent to SpotX: ",n),e.addMacrosToBoltLogger(n),Object(le.f)(o.a.UI.AD_CONTAINER,"block","visible")}),(function(){Ae.info("Failed to load Ad Unit")}))):Ae.debug("Failed to load SpotX ad; container is missing")}},{key:"handlePrebid",value:function(){var e,t=window.prebidWinner,n=this;if(t&&t.video&&t.video.hasOwnProperty("hb_bidder")&&void 0!==n.sdk.registerBid&&void 0!==n.sdk.competeBids&&(e=n.registerBids(t)))try{e.resolve({price:t.video.hb_val,vast_url:t.video.hb_vast}),n.sdk.competeBids(),Ae.info("Sending Prebid prebidWinners: ",t)}catch(t){e.cancel(),Ae.info("Prebid attempt [promise] cancelled")}}},{key:"registerBids",value:function(e){e.hb_val=parseFloat(Math.round(e.hb_val)/100).toFixed(2)}},{key:"playAd",value:function(){var e=this,t=o.a.Ad.PLAYER_ID_PREFIX+window.BoltAdManager.containerId;e.hasStarted=!0,e.paused=!1,e.container=window.BoltAdManager.container,Ae.info("Loading ".concat(e.provider," JS VPAID")),window.postLogMessage("Loading spotx ad adapter script"),e.client.isMobile&&(e._nativePlayback=!0),window.BoltAdManager.videoElement||(e.video=e.createVideoElement(t)),e.loadSDKScript()}},{key:"createVideoElement",value:function(e){var t=this;return window.BoltAdManager.videoElement=document.createElement("video"),window.BoltAdManager.videoElement.id=e,window.BoltAdManager.videoElement.setAttribute("width","100%"),window.BoltAdManager.videoElement.setAttribute("height","100%"),window.BoltAdManager.videoElement.setAttribute("style","position:absolute;top:0;left:0;bottom:0;right:0;"),t.containerWidth=t.container.window.clientWidth,t.containerHeight=t.container.window.clientHeight,t.container.appendChild(window.BoltAdManager.videoElement),window.BoltAdManager.videoElement.addEventListener("loadstart",t._setNativePlayback),window.BoltAdManager.videoElement}},{key:"subscribeEvents",value:function(){var e=this;e.sdk.subscribe((function(t){try{t=JSON.parse(t)}catch(e){Ae.error("Failed to parse AdLog message",{message:e.message,stack:e.stack})}Ae.info("AdLog: ",t),window.postLogMessage("".concat("AdLog: <br><b>Title:</b> ").concat(t.title||"","<br>")+"<b>Ad Id:</b> ".concat(t.ad_id||"","<br>")+"<b>Message:</b> ".concat(t.message||"","<br>")+"<b>Code:</b> ".concat(e._getAdLogCode(t.code)))}),"AdLog"),e.sdk.subscribe(e._onAdLoaded.bind(e),"AdLoaded"),e.sdk.subscribe(e._onAdStarted.bind(e),"AdStarted"),e.sdk.subscribe(e._onAdImpression.bind(e),"AdImpression"),e.sdk.subscribe(e._onAdStopped.bind(e),"AdStopped"),e.sdk.subscribe(e._onAdSkipped.bind(e),"AdSkipped"),e.sdk.subscribe(e._onAdVideoStart.bind(e),"AdVideoStart"),e.sdk.subscribe(e._onAdVideoFirstQuartile.bind(e),"AdVideoFirstQuartile"),e.sdk.subscribe(e._onAdVideoMidpoint.bind(e),"AdVideoMidpoint"),e.sdk.subscribe(e._onAdVideoThirdQuartile.bind(e),"AdVideoThirdQuartile"),e.sdk.subscribe(e._onAdVideoComplete.bind(e),"AdVideoComplete"),e.sdk.subscribe(e._onAdClickThru.bind(e),"AdClickThru"),e.sdk.subscribe(e._onAdUserMinimize.bind(e),"AdUserMinimize"),e.sdk.subscribe(e._onAdUserMinimize.bind(e),"AdUserClose"),e.sdk.subscribe(e._onAdPaused.bind(e),"AdPaused"),e.sdk.subscribe(e._onAdPlaying.bind(e),"AdPlaying"),e.sdk.subscribe(e._onAdSizeChange.bind(e),"AdSizeChange"),e.sdk.subscribe(e._onAdRemainingTimeChange.bind(e),"AdRemainingTimeChange"),e.sdk.subscribe(e._onAdVolumeChange.bind(e),"AdVolumeChange"),e.sdk.subscribe(e._onAdError.bind(e),"AdError"),e.onResizeAd=e.onResizeAd.bind(e),window.addEventListener("resize",e.onResizeAd)}},{key:"_getAdLogCode",value:function(e){switch(parseInt(e,10)){case 101:return"Ad Fault\tAn error has occurred with this ad.";case 102:return"VPAID Error\tA VPAID error has occurred.";case 103:return"Endpoint Opt Out\tVAST document provided by the ad returned an empty response, and therefore opted out of the opportunity.";case 104:return"Endpoint Timeout\tThe request for the VAST document took longer than the configured timeout value.";case 105:return"Endpoint Error\tThe request to the endpoint failed due to an error.";case 107:return"Total Fetch Timeout\tAd was not fetched before the configured total fetch timeout.";case 108:return"Total Process Timeout\tNo ad was able to start before the configured total process timeout.";case 109:return"Unplayable Media\tIn a no-Flash environment, but only Flash creatives available.";case 110:return"Ad Throttled\tFlash ad attempted to play, but was throttled by browser.";case 111:return"Ad Loaded!";default:return"No code available"}}},{key:"_onAdLoaded",value:function(e){window.postLogMessage("Ad Loaded"),Ae.debug("Ad Loaded",e);var t=this;t.duration=t.sdk.methods.getAdDuration()||t.sdk.methods.getAdRemainingTime(),t.currentTime=0,t.startTime=0,window.BoltAdManager._dispatchEvent(o.a.Media.Event.LOADED),window.BoltAdManager._dispatchEvent(o.a.Media.Event.PLAY),t._dispatchEvent(o.a.Media.Event.PLAY),t._dispatchEvent(o.a.Media.Event.DURATION_CHANGE),t._dispatchEvent(o.a.Media.Event.START_TIME_CHANGED),t.sdk.methods.startAd(),t.fillAdVideoContainer("100%","100%")}},{key:"_onAdStarted",value:function(e){window.postLogMessage("Ad started"),Ae.debug("Ad started",e)}},{key:"_onAdImpression",value:function(e){window.postLogMessage("Ad Impression"),Ae.debug("Ad Impression",e)}},{key:"_onAdStopped",value:function(e){window.postLogMessage("Ad stopped"),Ae.debug("Ad stopped",e),this.complete()}},{key:"_onAdSkipped",value:function(e){window.postLogMessage("Ad skipped"),Ae.debug("Ad skipped",e),this.complete()}},{key:"_onAdVideoStart",value:function(e){window.postLogMessage("Ad video start"),Ae.debug("Ad video start",e),window.BoltAdManager._dispatchEvent(o.a.Media.Event.PLAYING),this._dispatchEvent(o.a.Media.Event.PLAYING),this.showControlButtons()}},{key:"_onAdVideoFirstQuartile",value:function(e){window.postLogMessage("Ad first quartile "),Ae.debug("Ad first quartile ",e),this._dispatchEvent(o.a.Media.Event.FIRSTQUARTILE)}},{key:"_onAdVideoMidpoint",value:function(){this._dispatchEvent(o.a.Media.Event.MIDPOINT)}},{key:"_onAdVideoThirdQuartile",value:function(){this._dispatchEvent(o.a.Media.Event.THIRDQUARTILE)}},{key:"_onAdVideoComplete",value:function(){}},{key:"_onAdUserMinimize",value:function(){window.BoltAdManager._dispatchEvent(o.a.Ad.Event.CLOSED),this.complete()}},{key:"_onAdPaused",value:function(e){window.postLogMessage("Ad paused"),Ae.debug("Ad paused",e),window.PlayerState.state===window.PlayerState.PLAYING&&this.pause()}},{key:"_onAdPlaying",value:function(e){var t=this;window.postLogMessage("Ad playing"),Ae.debug("Ad playing",e),t.paused=!1,t.sdk.methods.resumeAd(),t._dispatchEvent(o.a.Media.Event.PLAYING),t._dispatchEvent(o.a.Media.Event.RESUME)}},{key:"_onAdClickThru",value:function(e){window.postLogMessage("Ad click through"),Ae.debug("Ad click through",e),window.BoltAdManager._dispatchEvent(o.a.Ad.Event.CLICKED)}},{key:"_onAdSizeChange",value:function(){}},{key:"_onAdRemainingTimeChange",value:function(){var e=this;e.currentTime=parseInt(e.duration,10)-parseInt(e.sdk.methods.getAdRemainingTime(),10),e._dispatchEvent(o.a.Media.Event.TIME_UPDATE,e.currentTime)}},{key:"_onAdVolumeChange",value:function(){}},{key:"_onAdLog",value:function(e){try{e=JSON.parse(e)}catch(e){Ae.error("SDK AdLog, Failed to parse AdLog message",{message:e.message,stack:e.stack})}Ae.info("AdLog: ",e),window.postLogMessage("".concat("AdLog: <br><b>Title:</b> ").concat(e.title||"","<br>")+"<b>Ad Id:</b> ".concat(e.ad_id||"","<br>")+"<b>Message:</b> ".concat(e.message||"","<br>")+"<b>Code:</b> ".concat(this._getAdLogCode(e.code)))}},{key:"_onAdError",value:function(e){var t=this;t._error=!0,window.BoltAdManager.attempts<t.maxAttempts?t._dispatchEvent(o.a.ERROR,e):(Ae.debug("Daisy Chain complete after ".concat(window.BoltAdManager.attempts,". No ad found"),e),t.complete())}},{key:"onAdEvent",value:function(e){"AdRemainingTimeChange"!==e&&"AdLog"!==e&&(Ae.info("Ad Event: ".concat(e)),window.postLogMessage("".concat(e)))}},{key:"getVPI",value:function(){try{var e=-1,t="VPI[".concat((++e).toString(),"]=VPAID_JS");return this.client.isMobile?this.client.supportedVideoTypes.indexOf("mp4")>=0&&(t+="&VPI[".concat((++e).toString(),"]=MP4")):t+="&VPI[".concat((++e).toString(),"]=VPAID&VPI[").concat((++e).toString(),"]=MP4"),t}catch(e){Ae.debug("Error getting VPI (file type) ",e)}}},{key:"_createBoltLoggerMsg",value:function(e){var t="".concat('<span style="color:#ffa500">[Spotx JSVPAID AdLog Event] - AdLog:</span> <br><b style="color:#eee">Title:</b> ').concat(e.title||"","<br>")+'<b style="color:#ddd">Ad Id:</b> '.concat(e.ad_id||"","<br>")+'<b style="color:#ccc">Event Type:</b> '.concat(e.event_type||"","<br>")+'<b style="color:#bbb">Message:</b> '.concat(e.message||"","<br>")+'<b style="color:#aaa">Code:</b> '.concat(e.code.toString()||""," - ").concat(this._getAdLogCode(e.code));if(e.debug&&e.debug.length){var n=e.debug.length;t+="<br><b><u>Debug:</u></b> ";for(var i=0;i<n;i++)for(var r in e.debug[i])t+="<br><b><em>".concat(r,"</em></b>: ").concat(e.debug[i][r])}return t}},{key:"showControlButtons",value:function(){}},{key:"getVolume",value:function(){return void 0!==this.sdk?this.sdk.methods.getAdVolume():null}},{key:"setVolume",value:function(e){var t=this;window.client.isMobile||void 0===t.sdk||void 0===t.sdk.methods||t.volume===e||(Ae.debug("Set volume",e),t.volume=e,t.sdk.methods.setAdVolume(e),t._dispatchEvent(o.a.Media.Event.VOLUME_CHANGED,e))}},{key:"mute",value:function(e){var t=this;t.muted=!!e,t.video.muted=t.muted,Ae.info("mute",t.muted),e?(t.setVolume(0),t.sdk.methods.setAdVolume(0),t._dispatchEvent(o.a.Media.Event.MUTED)):(t.setVolume(t.client.isMobile?1:this.volume),t.sdk.methods.setAdVolume(t.client.isMobile?1:this.volume),t._dispatchEvent(o.a.Media.Event.UNMUTED))}},{key:"pause",value:function(){var e=this;e.paused=!0,e._dispatchEvent(o.a.Media.Event.PAUSED),window.BoltAdManager._dispatchEvent(o.a.Media.Event.PAUSED),void 0!==e.sdk&&e.sdk.methods.pauseAd()}},{key:"resume",value:function(){void 0!==this.sdk&&(this.sdk.methods.resumeAd(),window.BoltAdManager._dispatchEvent(o.a.Media.Event.PLAYING))}},{key:"onResizeAd",value:function(){var e=this;document.getElementsByClassName("is-sticky-module")[0]||(window.PlayerView.fullscreen?(e.container.style="display:block;",e.sdk.resize(e.container.offsetWidth,e.container.offsetHeight,"fullscreen")):e.sdk.resize(e.container.getAttribute("data-zeus-initial-width")||e.container.offsetWidth,e.container.getAttribute("data-zeus-initial-height")||e.container.offsetHeight),e.setFullscreen(window.PlayerView.fullscreen),Ae.info("Ad fullscreen toggled"))}},{key:"fillAdVideoContainer",value:function(e,t){var n=e.toString(),i=t.toString();try{n.indexOf("%")>-1?(window.BoltAdManager.videoElement.style.width=n,window.BoltAdManager.videoElement.style.height=i):(window.BoltAdManager.videoElement.style.width=n,window.BoltAdManager.videoElement.style.height=i,window.BoltAdManager.videoElement.width=parseInt(n,10),window.BoltAdManager.videoElement.height=parseInt(i,10))}catch(e){Ae.error("fillAdVideoContainer error",{message:e.message,stack:e.stack})}}},{key:"setFullscreen",value:function(e){e!==this.fullscreen&&(this.fullscreen=e,Ae.info("Set fullscreen",e))}},{key:"complete",value:function(){this._isAd=!0,window.BoltAdManager._dispatchEvent(o.a.Ad.Event.COMPLETED),this.end(),Ae.info("Ad Complete")}},{key:"end",value:function(){window.BoltAdManager._dispatchEvent(o.a.Media.Event.ENDED),this.sdk.destroy()}},{key:"remove",value:function(){var e=this;e.hasStarted=!1,window.removeEventListener("resize",e.onResizeAd),e.sdk.unsubscribeAll();try{e.container.removeChild(e.frame)}catch(e){}e._removeAssets(),e._removeVideoElement(),window.BoltAdManager.videoElement=null,window.BoltAdManager._dispatchEvent("removed"),Ae.info("Ad removed")}},{key:"getCurrentTime",value:function(){var e=this;return void 0!==e.sdk&&void 0!==e.sdk.methods?e.duration-e.currentTime:0}}])&&he(t.prototype,n),i&&he(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(ce.default),Se=n(44);n(74);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Re(e);if(t){var r=Re(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ie(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return je}));var De=new r.a("AD-MANAGER"),Ve=new r.a("AD-SERVER"),Be=new r.a("LOG-INSIGHTS"),xe=3e4,je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(l,e);var t,i,r,d=Me(l);function l(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Le(Ie(n=d.call(this)),"_adPlays",0),Le(Ie(n),"_adSessionCount",0),Le(Ie(n),"_isTycheRenderBackFilled",!1),Le(Ie(n),"_kinesisBMHasRecorded",{embedInitToAdLoaded:!1,embedInitToAdReady:!1,embedInitToHbRequest:!1,embedinitToAdStart:!1}),Le(Ie(n),"adQueue",[]),Le(Ie(n),"handleServerResponse",(function(e){var t=Ie(n),i=e.requestId,r=e.data;if(window.DebugMode.vastTestMode)try{var a=window.DebugMode.vastXmlDoc;a&&(r=a.toString())}catch(e){console.error("[Debug] Error happened during substitution XML doc",e)}if(window.benchmarksHelper.create("bolt_daisyChain_parsing"),!r||"string"==typeof r&&0===r.trim().length)De.warn("Empty response from ad server"),Be.warn("Received empty response",{groupName:"3-VastLoader",requestId:i}),Object(c.e)("vastType","empty"),Object(s.c)({code:100,message:"Invalid VAST XMLDocument"}),t._retryAdRequest("Empty response.");else try{var o=(new DOMParser).parseFromString(r,"text/xml");Be.info("Ad server response received",{groupName:"3-VastLoader",requestId:i,vastSize:r.length}),Be.debug("Ad server response received (with VAST)",{groupName:"3-VastLoader",requestId:i,vastXml:r}),t.handleXMLResponse(o,i)}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack}),Be.error("VAST document cannot be parsed",{groupName:"4-VastParser",requestId:i,vastSize:r.length}),Be.debug("VAST document cannot be parsed (with VAST)",{groupName:"4-VastParser",requestId:i,vastXml:r}),Object(c.e)("vastType","error"),t._retryAdRequest("Bad response.")}})),Le(Ie(n),"_onAdMediaLoaded",(function(){var e=Ie(n);if(e._killDCTimeout(),e.adPlayer){if(e._isLinear=e.adPlayer.isLinear(),e._isLinear||(e.container.style.display="block"),e.container.style.backgroundColor="rgba(0,0,0,0)",De.info("Ad media fully loaded",{linear:!!e._isLinear,ttl:(Date.now()-e._dcStartTime)/1e3}),window.postLogMessage("Ad media fully loaded, ".concat((Date.now()-e._dcStartTime)/1e3," secs after daisy-chain began")),Be.info("Ad media fully loaded",{groupName:"5-AdPlayer",playerMediaUrl:e.adPlayer.getSource(),adType:e.type}),e.type===o.a.Ad.Type.GOOGLE&&window.AdRequest.setMedia(e.adPlayer.getSource()),window.AdRequest.success(),window.prebidWinner&&!window.kinesis.headerbidHasBeenTracked){var t=window.prebidWinner.hb_bidder,i=window.prebidWinner;"rubicon"===t&&/rubicon(project)?.com/.test(window.prebidWinner.hb_vast)?i.bidder="rubicon":i.bidder="appnexusAst"===t?"appnexus":t,De.info("Bid winner: ".concat(t,". Now sending impression to kinesis for bidder"),i),window.kinesis.send("ad_impressions",i,"app")}if(e.selectedServer.type!==o.a.Ad.Server.SPOTX&&e.selectedServer.type!==o.a.Ad.Server.SPOTX_SDK?(e.recordCustomAdImpression(),window.SSTracker.success()):e._backfilling&&window.SSTracker.backfillSuccess(e._selectedTag),!e._kinesisBMHasRecorded.embedInitToAdLoaded){e._kinesisBMHasRecorded.embedInitToAdLoaded=!0;try{window.kinesis.send("benchmarks",{type:"bolt_embedInit_to_onAdLoaded",duration:Date.now()-window.bootStartTime},"app")}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack})}}}})),Le(Ie(n),"_onAdReady",(function(){var e={type:"zeus_event",name:"boltSetIframeVisibility",id:window.id,isAd:!0,data:{visibilityVal:"visible"}};if(window.parent.postMessage(JSON.stringify(e),Object(a.k)()),!n._kinesisBMHasRecorded.embedInitToAdReady){n._kinesisBMHasRecorded.embedInitToAdReady=!0;try{window.kinesis.send("benchmarks",{type:"bolt_embedInit_to_onAdReady",duration:Date.now()-window.bootStartTime},"app")}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack})}}})),Le(Ie(n),"_onAdError",(function(e){var t=Ie(n),i="string"==typeof e.data?e.data:"Ad Error.";De.warn("AdError",{message:e.data,type:e.type,adPlayer:t.type}),t._retryAdRequest(i)})),window._kinesisBMHasRecorded=n._kinesisBMHasRecorded,n.linearAdPool=new de,n.overlayAdPool=new de(!0),n.prefetchEnabled=!1,n.containerId=t,n.container=document.getElementById(n.containerId),n.triedCampaigns=[],n.status="none",n.previousStatus="none",n.sequentialPrerollAdRequested=null,n.aborted=!1,n.type=null,n.bestMedia=null,n.ads=null,n.ad=null,n._isDcDisabled=!1,n._dcTimeout=null,n._dcStartTime=null,n._dcTimeoutReached=!1,void 0!==window.prerollAdRefreshRetries&&void 0!==window.prerollAdRefreshTimeout&&(n._blankRetryCount=1,n._blankRetries=window.prerollAdRefreshRetries||0,n._blankRefreshTimeout=1e3*window.prerollAdRefreshTimeout||0,window.PlayerSettings.onAdUnavailable="hide"),xe=e&&"number"==typeof e?e:xe,n.timeout=xe,De.info("Ad timeout set to",xe/1e3," seconds"),window.postLogMessage("Ad timeout set to ".concat(xe/1e3," seconds"),"info"),n._isLinear=!0,n.selectedServer=null;var i=function(){var e,t,i=null===(e=n.ads)||void 0===e?void 0:e.isAdFallbackMode;if(null!==(t=n.ads)&&void 0!==t&&t.isAdPod&&!i&&(n.adPlayer&&n.type===o.a.Ad.Type.JS_VPAID&&(n.adPlayer.remove(),n.provider=null,n.type="vast",Object(c.e)("vastType","vast")),n.ad=n.ads.getNextAd(),Object(c.a)("adPodSequence",n.ads.getCurrentIndex()),n.ad))return n._isDcDisabled=!0,n.adPlayer&&"function"==typeof n.adPlayer.disableListeners&&n.adPlayer.disableListeners(),Object(Se.a)(),void n._parseSelectedAdAndPlay();n.deletePrebidObjects(),n.selectedVMAPBreak&&n.trackVMAPEvent("breakEnd"),n.remove()};return n.addEventListener(o.a.Media.Event.ENDED,(function(){i()}),Ie(n)),n.addEventListener(o.a.Media.Event.SKIPPED,(function(){i()}),Ie(n)),n.addEventListener(o.a.Ad.Event.SHOW_FALLBACK,(function(){var e;null!==(e=n.ads)&&void 0!==e&&e.isAdPod&&(n.ad=n.ads.getFallbackAd(),n.ad&&(n.adPlayer&&n.type===o.a.Ad.Type.JS_VPAID&&(n.adPlayer.remove(),n.provider=null,n.type="vast",Object(c.e)("vastType","vast")),n.ads.isAdFallbackMode=!0,Object(c.a)("adPodSequence",-1),n._isDcDisabled=!0,n.adPlayer&&"function"==typeof n.adPlayer.disableListeners&&n.adPlayer.disableListeners(),Object(Se.a)(),n._parseSelectedAdAndPlay()))}),Ie(n)),n.addOnceEventListener(o.a.Ad.Event.READY,n._onAdReady),n.hasBeenTouched=!1,window.client.isMobile&&(n._createVideoElement(),window.ContentPlayer.show(!1)),n._selectedTag=null,n.forcedServer=null,window.tagTestUrl&&(n.forcedServer=o.a.Ad.Server.SPOTX,window.googleIma&&(n.forcedServer=o.a.Ad.Server.DFP)),n.dfpServer=null,n.spotxServer=null,n.spotxSdkServer=null,n.genericServer=null,n.displayBackfillServer=null,n.houseAdServer=null,n._backfilling=!1,n.timing=null,n.adShouldBeQueued=null,n.VMAPAdapter=new Z,n.VMAPBreaksForCurrentAdTiming=null,n.selectedVMAPBreak=null,n.processedVMAPSecond=null,n._currentRequestId=null,n.MoatAnalytics=null,n.pixelsContainer=document.createElement("div"),n.pixelsContainer.id="bolt_trackingpixels",n.pixelsContainer.setAttribute("class","position:absolute;bottom:0;left:0;visibility:hidden;width:1px;height:1px;"),document.body.appendChild(n.pixelsContainer),window.PlayerView.addEventListener(o.a.Media.Event.DURATION_CHANGE,(function(){var e=Ie(n);window.PlayerView.currentPlayer.isAd()||e.VMAPAdapter.setContentDuration(window.ContentPlayer.duration,(function(t){e._dispatchEvent(o.a.Ad.Event.VMAP_CUEPOINTS_CHANGED,t)}))}),Ie(n)),n}return t=l,(i=[{key:"init",value:function(e){var t=this;t.resetStatus(),t.linearAdPool.drain(),t.overlayAdPool.drain(),t.processedVMAPSecond=null,t.VMAPBreaksForCurrentAdTiming=null,t.VMAPAdapter.reset(),t.selectedVMAPBreak=null,t.isUsingVMAP=!1,t.config=window.PlayerSettings.embedAds||window.CurrentVideoConfig.advertising,t.config===window.PlayerSettings.embedAds&&De.info("Using embed ad settings",t.config),t.selectServer(),window.postLogMessage("Checking if VMAP is used");var n=t.selectedServer&&t.selectedServer.selectTag("vmap");n?t.VMAPAdapter.init(n,(function(){De.info("Using VMAP"),window.postLogMessage("Found VMAP: ".concat(n)),t.isUsingVMAP=!0,e()}),(function(){window.postLogMessage("VMAP error","error"),e()})):(window.postLogMessage("Not using VMAP"),e())}},{key:"_handleAdPodLoadedEvent",value:function(){this.adPlayer.adPlayer.play()}},{key:"_createVideoElement",value:function(){return window.client.system.ios&&window.PlayerSettings.autoplay?(this.container.innerHTML="<video playsinline muted id='".concat(o.a.Ad.PLAYER_ID_PREFIX).concat(this.containerId,"'></video>"),this.hasBeenTouched=!0):this.container.innerHTML="<video id='".concat(o.a.Ad.PLAYER_ID_PREFIX).concat(this.containerId,"'></video>"),this.videoElement=this.container.firstElementChild,this.videoElement.setAttribute("style","position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;visibility:hidden"),this.videoElement}},{key:"deletePrebidObjects",value:function(){window.prebidWinner=Object(a.b)(window.prebidWinner),window.PrebidInfo=Object(a.b)(window.PrebidInfo),window.kassandraWinner=Object(a.b)(window.kassandraWinner)}},{key:"resetStatus",value:function(){De.debug("Reset ad manager"),this.previousStatus=this.status,this.status="none",this.sequentialPrerollAdRequested=null,this.prebidSettings=null,this._isTycheRenderBackFilled=!1,this._adPlays+1>window.prerollAdAmt&&(this.container.style.display="none",this.container.style.visibility="hidden"),this.adPlayer=null,this.ads=null,this.ad=null,this.vastDoc=null,this.VMAPAdapter.breaks||(this.selectedServer=null),this.forcedServer=null,window.tagTestUrl&&(this.forcedServer=o.a.Ad.Server.SPOTX,window.googleIma&&(this.forcedServer=o.a.Ad.Server.DFP)),this.adtechGoogleAdCount=null,this.provider=null,this.triedCampaigns=[],this._backfilling=!1,this.timing=null,this.adShouldBeQueued=null,this.adQueue.length=0,this._currentRequestId=null,this.type=null,this.bestMedia=null,this._isLinear=null,this._isDcDisabled=!1,this._dcTimeout&&(window.clearTimeout(this._dcTimeout),this._dcTimeout=null),this.forcedServer=null,window.tagTestUrl&&(this.forcedServer=o.a.Ad.Server.SPOTX,window.googleIma&&(this.forcedServer=o.a.Ad.Server.DFP)),this.VMAPBreaksForCurrentAdTiming&&0===this.VMAPBreaksForCurrentAdTiming.length&&(this.VMAPBreaksForCurrentAdTiming=null),this.selectedVMAPBreak=null,this._selectedTag=null,this.container.style.width="100%",this.container.style.height="".concat(this.container.getAttribute("data-zeus-initial-height"),"px"),this.container.style.bottom=0,this.container.style.top=0,this.container.style.left=0,this.container.style.right=0,this.container.style.backgroundColor="",this.MoatAnalytics=null}},{key:"clearTrackingImages",value:function(){if(this.pixelsContainer&&this.pixelsContainer.firstElementChild)for(;this.pixelsContainer.firstElementChild;)this.pixelsContainer.removeChild(this.pixelsContainer.firstElementChild)}},{key:"createServers",value:function(e){for(var t=this,n=0,i=t.config.servers.length;n<i;n++){var r=new ne(t.config.servers[n]);e&&(r.type=e),r.type===o.a.Ad.Server.DFP?t.dfpServer=r:r.type===o.a.Ad.Server.SPOTX?t.spotxServer=r:r.type===o.a.Ad.Server.SPOTX_SDK?t.spotxSdkServer=r:r.type===o.a.Ad.Server.DISPLAY_BACKFILL?t.displayBackfillServer=r:r.type===o.a.Ad.Server.HOUSE_AD?t.houseAdServer=r:t.genericServer=r,Ve.debug("Ad Server: ".concat(r.type))}}},{key:"getSelectedServer",value:function(e){var t=this;return e===o.a.Ad.Server.DFP?t.dfpServer:e===o.a.Ad.Server.SPOTX||e===o.a.Ad.Server.SPOTX_SDK?t.spotxServer:e===o.a.Ad.Server.DISPLAY_BACKFILL?t.displayBackfillServer:e===o.a.Ad.Server.HOUSE_AD?t.houseAdServer:e===o.a.Ad.Server.GENERIC_GOOGLE||e===o.a.Ad.Server.GENERIC_VAST||t.genericServer?t.genericServer:t.dfpServer||t.spotxServer||t.spotxSdkServer}},{key:"selectServer",value:function(){var e=this;return e.selectedServer||(e.dfpServer=null,e.spotxServer=null,e.spotxSdkServer=null,e.displayBackfillServer=null,e.houseAdServer=null,e.genericServer=null,e.createServers(this.forcedServer),e.selectedServer=e.getSelectedServer(this.forcedServer),e.selectedServer&&(e.selectedServer.attempts=0)),e.selectedServer}},{key:"hasVMAPBreak",value:function(e){if(Math.floor(e)===this.processedVMAPSecond)return!1;var t=this.VMAPAdapter.getBreaks(e);return t&&De.info("Found VMAP ad break at ".concat(e,"s")),!!t}},{key:"prefetchAds",value:function(e,t,n){var i=this;if(i.selectServer(),i.selectedServer)try{var r=i.selectedServer.selectTag(e);if(r){var a="overlay"===e?i.overlayAdPool:i.linearAdPool;a.serverType=i.selectedServer.type,a.serverType!==o.a.Ad.Server.SPOTX&&a.serverType!==o.a.Ad.Server.SPOTX_SDK?a.setSize(1):a.setSize(3),n?a.refill(r,(function(){t&&t()})):a.fill(r,e,(function(){t&&t()}))}else t&&t()}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack}),t&&t()}else De.info("Prefetch failed, no timing tag in config",{timing:e}),t&&t()}},{key:"requestAd",value:function(e){var t=this,n=e.timing,i=e.cuepoint,r=e.callbackIfRequestAccepted,a=e.loadAd;if("overlay"===t.timing&&(window.AdSession.complete(),t.remove()),!t._prepareForAdRequest(e))return!0===a&&!0===t.adShouldBeQueued&&(t.adShouldBeQueued=!1,t._playCb(),!0);t._backfilling=!1,t.timeout=xe,t.container.style.display="block",t.VMAPAdapter.breaks&&(t.VMAPBreaksForCurrentAdTiming||(t.VMAPBreaksForCurrentAdTiming="midroll"===n?t.VMAPAdapter.getBreaks(i):t.VMAPAdapter.getBreaks(n))),t.tycheRequestBackFill(),"function"==typeof r&&r(),Object(se.a)().then((function(e){t.DOMPosition=e,t._start()}))}},{key:"requestOverlay",value:function(e,t,n){var i=this;if(!i._prepareForAdRequest({timing:"overlay",cuepoint:e,callbackIfRequestAccepted:t}))return null;i.timeout=15e3,De.info("Requesting overlay ad"),window.postLogMessage("Requesting overlay ad"),i._start(n)}},{key:"_prepareForAdRequest",value:function(e){var t,n,i=this,r=e.timing,a=e.cuepoint,o=e.adShouldBeQueued,d=e.loadAd;return"none"!==i.status||d?(d?(De.info("loadAd() API called. Play Ad"),null===(t=window)||void 0===t||null===(n=t.BoltLogger)||void 0===n||n.info("loadAd() API called. Play Ad")):(De.info("Currently requesting ad, skipping the new request (".concat(r,", ").concat(a,"s)")),window.postLogMessage("Currently requesting ad, skipping the new request","warn")),!1):(De.info("Preparing to make new ad request (".concat(r,", ").concat(a,"s)")),i.clearTrackingImages(),i.selectedServer||i.selectServer(),i.timing=r,i.cuepoint=a,i.adShouldBeQueued=!!o,i.aborted=!1,i.previousStatus=i.status,i.status="requesting",window.AdSession.reset(),window.AdRequest.reset(),window.SSTracker.reset(),!0)}},{key:"startDCTimer",value:function(e){var t=this,n=new Date;De.info("Ad request started",{ts:n}),window.postLogMessage("Ad request starts at ".concat(n)),t._dcTimeoutReached=!1,t._dcTimeout&&(clearTimeout(t._dcTimeout),t._dcTimeout=null),t._dcStartTime=n.getTime(),t._dcTimeout=setTimeout((function(){var e=new Date;De.warn("Ad request timeout reached ",{ts:e}),Be.warn("Ad request timeout reached",{groupName:"2-AdServer",serverName:t.selectedServer.type,requestUrl:t.src,attempts:t.selectedServer.attempts,timeout:t.timeout}),window.postLogMessage("Ad request timeout reached ".concat(e),"error"),t._dcTimeoutReached=!0,t._fail()}),e||t.timeout)}},{key:"_start",value:function(e){var t=this;if(t._selectedTag=null,t.type=null,window.AdRequest.reset(),!t.aborted){if(!t.selectedServer)return"function"==typeof e&&e.call(null),t.resetStatus(),void t._dispatchEvent(o.a.Ad.Event.TAG_NOT_AVAILABLE);if(t._backfilling&&window.postLogMessage("Starting backfill."),t.isUsingVMAP&&!t._backfilling&&"overlay"!==t.timing?(De.debug("Trying to find a VMAP break"),window.postLogMessage("Looking for a VMAP break"),t.VMAPBreaksForCurrentAdTiming&&t.VMAPBreaksForCurrentAdTiming.length>0&&(t.processedVMAPSecond=t.cuepoint,De.info("Using VMAP Breaks :",t.VMAPBreaksForCurrentAdTiming),window.postLogMessage("Found a VMAP break @".concat(t.cuepoint,"s")),t.selectedVMAPBreak=t.VMAPBreaksForCurrentAdTiming.shift(),t._selectedTag=t.selectedVMAPBreak?t.selectedVMAPBreak.adURI:null,t._selectedTag&&/doubleclick.net/i.test(t._selectedTag)&&(t.type=o.a.Ad.Type.GOOGLE,t.provider=o.a.Ad.Provider.GOOGLE))):t._selectedTag=t.selectedServer.selectTag(t.timing),!t._selectedTag)return t.isUsingVMAP&&"overlay"!==t.timing?(De.warn("No ".concat(t.timing," VMAP break found")),window.postLogMessage("No ".concat(t.timing," VMAP break found"),"error")):(De.error("No ".concat(t.timing," tag in config")),window.postLogMessage("No ".concat(t.timing," tag in config"),"error")),"function"==typeof e&&e.call(null),t.resetStatus(),void t._dispatchEvent(o.a.Ad.Event.TAG_NOT_AVAILABLE);t._dispatchEvent(o.a.Ad.Event.REQUESTED);var n=function(){t.src=Object(a.E)(t.src),t.selectedServer.attempts=0,t._dcTimeout||t.startDCTimer(),window.AdSession.start(t._backfilling),t._backfilling?window.SSTracker.backfill(t._selectedTag):t.selectedServer.type!==o.a.Ad.Server.SPOTX_SDK&&window.SSTracker.start({tag:t._selectedTag,timing:t.timing,serverType:t.selectedServer.type,vmap:t.isUsingVMAP?t.VMAPAdapter.primaryTag:null}),t.daisyChain()};if(t.src=t._selectedTag.concat(),window.site&&window.site.hostname&&window.site.hostname.indexOf("coolmathgames.com")>-1&&(t.src="//securepubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/45966600/pw/publisher:1023174-website:71134-video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]"),t.adLoadTimeStart=Date.now(),t.prefetchEnabled)n();else{t.prebidSettings=Object(se.c)(t.selectedServer.siteTags),t.prebidSettings.timing=t.timing,t.prebidSettings.serverType=t.selectedServer.type,De.debug("Prebid settings",t.prebidSettings);var i=!0;void 0!==t.prebidSettings.requestBeforeTimeout&&(i=t.prebidSettings.requestBeforeTimeout);var r="preroll"!==t.timing||i?"prebid":"waitForPrebid",d="preroll"===t.timing&&i;t.selectedServer.type===o.a.Ad.Server.SPOTX?!t.prebidSettings||t.prebidSettings.enabled&&!d?MessageChannel.sendRequest(r,(function(){n()}),t.prebidSettings):n():t.selectedServer.type===o.a.Ad.Server.DFP?!t.prebidSettings||t.prebidSettings.enabled&&!d?MessageChannel.sendRequest(r,(function(){t.initGoogleDFPSDK(t._currentRequestId)}),t.prebidSettings):t.initGoogleDFPSDK(t._currentRequestId):t.selectedServer.type===o.a.Ad.Server.SPOTX_SDK?!t.prebidSettings||t.prebidSettings.enabled&&!d?MessageChannel.sendRequest(r,(function(){t.initSpotxSDK(t._currentRequestId)}),t.prebidSettings):t.initSpotxSDK(t._currentRequestId):!t.prebidSettings||t.prebidSettings.enabled&&!d?MessageChannel.sendRequest(r,(function(){n()}),t.prebidSettings):n()}}}},{key:"tycheRequestBackFill",value:function(){var e=(window.tycheData.rewardedVideo||{}).backfill;if(!window.rewardedVideo||"display_backfill_ad"===e){var t={action:"boltRequestBackFill",id:window.id,size:{height:window.innerHeight,width:window.innerWidth}};window.parent.postMessage(JSON.stringify(t),Object(a.k)())}}},{key:"tycheRenderBackFill",value:function(){var e=this;e._isTycheRenderBackFilled=!0,e.type=o.a.Ad.Type.DISPLAY_BACKFILL,e.forcedServer=e.type,e.selectedServer=null,e.selectServer(),e.playAd()}},{key:"requestHouseAd",value:function(){var e=this;e.type=o.a.Ad.Type.HOUSE_AD,e.forcedServer=e.type,e.selectedServer=null,e.selectServer(),e.playAd()}},{key:"daisyChain",value:function(){var e=this;if(e.adtechGoogleAdCount=null,e.bestMedia=null,e.provider=null,window.AdRequest.reset(),e.removeAllListeners("clicked"),e.removeEventListener(o.a.Media.Event.LOADED,e._onAdMediaLoaded),e.adPlayer&&e.adPlayer.removeEventListener(o.a.ERROR,e._onAdError),!e.aborted){if(e._dcTimeoutReached)return De.error("Daisy chain timeout."),void window.postLogMessage("Timeout","error");var t;if(e.selectedServer||e.selectServer(),e.selectedServer.attempts++,Object(c.e)("daisyChainCount",e.selectedServer.attempts),Object(c.e)("serverType",e.selectedServer.type),e.selectedServer.attempts>1&&(e._kinesisBMHasRecorded.embedInitToAdLoaded=!0,e._kinesisBMHasRecorded.embedInitToAdReady=!0),De.info("Ad attempt #".concat(e.selectedServer.attempts," of ").concat(e.selectedServer.maxAttempts)),window.postLogMessage("Attempt #".concat(e.selectedServer.attempts," of ").concat(e.selectedServer.maxAttempts)),e.selectedServer.type===o.a.Ad.Server.DFP&&(window.kassandraWinner?(Object(a.b)(window.kassandraWinner),window.kassandraWinner=null,De.info("Removing kassandra prebid object and requesting DFP again"),window.postLogMessage("Removing kassandra prebid object and requesting DFP again")):null!==(t=window.prebidWinner)&&void 0!==t&&t.hb_bidder?(e.deletePrebidObjects(),De.info("DFP request attempt #2 without prebid"),window.postLogMessage("DFP request attempt #2 without prebid")):(e.selectedServer.attempts++,De.info("No prebid winners, no DFP daisy chain request attempt #2"))),e.selectedServer.attempts>e.selectedServer.maxAttempts)return De.info("Max ad attempts ".concat(e.selectedServer.maxAttempts," exhausted")),window.postLogMessage("Max ad attempts ".concat(e.selectedServer.maxAttempts," exhausted."),"error"),e.deletePrebidObjects(),e._fail(),null;e._backfilling||(e.selectedServer.type===o.a.Ad.Server.GENERIC_GOOGLE||e.isUsingVMAP)&&window.AdRequest.start(e._selectedTag,null,e.selectedServer.attempts);var n=!e.SpotxSdk&&e.selectedServer.spotxChannelId&&(e.selectedServer.type===o.a.Ad.Server.SPOTX_SDK||e.isUsingVMAP&&e.type===o.a.Ad.Type.SPOTX);if(e._currentRequestId=Date.now(),e.selectedServer.type===o.a.Ad.Server.GENERIC_GOOGLE||window.googleIma||e.isUsingVMAP&&e.type===o.a.Ad.Type.GOOGLE)if(e.prefetchEnabled){var i=("overlay"===e.timing?e.overlayAdPool:e.linearAdPool).getAd();i&&i.ad?(e.src=i.ad,e.processCustomGoogleAd()):e._fail()}else e.processCustomGoogleAd();else e.selectedServer.type===o.a.Ad.Server.DFP?e.initGoogleDFPSDK(e._currentRequestId):n?e.initSpotxSDK(e._currentRequestId):e.SpotxSdk?e._spotxSdkPlayer():e._loadNewTag()}}},{key:"_excludeAdCampaignKeys",value:function(){var e=this;e.triedCampaigns.length>0&&(e.triedCampaigns=[].concat(Te(e.triedCampaigns),Te(window.heavyAds)).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),e.selectedServer.type===o.a.Ad.Server.SPOTX&&(e.src="".concat(e.src,"&ads_to_block[]=").concat(e.triedCampaigns.join("&ads_to_block[]="))))}},{key:"getCustomReportParams",value:function(){var e,t,n="";return Object(c.e)("spotx.customParams",!1,{useDaisyChainCount:!0}),null!==(e=window.CurrentVideoConfig)&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.customReporting&&window.CurrentVideoConfig.settings.customReporting.forEach((function(e){Object(c.e)("spotx.customParams",!0,{useDaisyChainCount:!0}),n+="&".concat(e.key,"=").concat(e.value)})),n}},{key:"_loadNewTag",value:function(){var e=this;if(!e.aborted){var t=function(){var t=e._currentRequestId;if(1===e.selectedServer.attempts?window.AdRequest.start(e.src,e.thirdPartyTag||null,e.selectedServer.attempts,e.bid):window.AdRequest.start(e.src,e.thirdPartyTag||null,e.selectedServer.attempts),e.prefetchEnabled&&!e._backfilling){var n="overlay"===e.timing?e.overlayAdPool:e.linearAdPool,i=n.getAd();i&&i.ad?(e.type=i.type,window.AdRequest.campaignId=i.campaignId,i.type!==o.a.Ad.Type.VAST&&i.type!==o.a.Ad.Type.OVERLAY||(De.info("Using cached VAST ad from ".concat(e.timing," ").concat(n.name," pool")),window.postLogMessage(" Using cached VAST ad from ".concat(e.timing," ").concat(n.name," pool")),e.successfulVASTResponse(i.ad,t))):(De.info("No ad from ".concat(e.timing," ").concat(n.name," pool")),e._retryAdRequest("No ad in ".concat(e.timing," ").concat(n.name," pool")))}else{e.selectedServer.type===o.a.Ad.Server.SPOTX&&e.spotxServer&&("prefetching"!==e.previousStatus||e.selectedServer.attempts>1)&&e._excludeAdCampaignKeys(),De.debug("Loading tag: ".concat(e.src)),window.postLogMessage("Loading tag: ".concat(e.src));var r=e.selectedServer.type===o.a.Ad.Server.SPOTX||e.selectedServer.type===o.a.Ad.Server.SPOTX_SDK;if(window.DebugMode.vastTestMode){var d=window.DebugMode.vastUrl;d&&(e.src=d)}Object(a.L)({url:e.src,method:"get",requestId:t,withCredentials:r}).then(e.handleServerResponse).catch((function(t){e._retryAdRequest("Network error. Id: ".concat(t))}))}};e.selectedServer.type===o.a.Ad.Server.SPOTX&&e.spotxServer&&(Object(c.e)("adServer","spotx"),e.src=ue.d(e.src),e.src=ue.c(e.src),e.src=ue.b(e.src),e.src+="&custom[daisy_chain_count]=".concat(e.selectedServer.attempts),window.OverwolfSysData&&(e.src+=ue.e(window.OverwolfSysData)),window.shouldReadGDPRConsents)?ue.a(e.src,(function(){t()})):(Object(c.e)("serverType",e.selectedServer.type),t())}}},{key:"_retryAdRequest",value:function(e){var t="string"==typeof e?e:"Error.";window.AdRequest.fail(t),window.postLogMessage("".concat(t," Retrying."),"warn"),this.previousStatus=this.status,this.status="failed",this.src=this._selectedTag.concat(),Be.warn("Retry ad request with error: ".concat(t),{groupName:"2-AdServer",requestUrl:this.src}),this.daisyChain()}},{key:"_fail",value:function(){var e,t,n,i,r=this;if(r.adtechGoogleAdCount=null,!r._isTycheRenderBackFilled&&window.displayBackfill&&window.displayBackfill.enabled)r.tycheRenderBackFill();else{if(null!==(e=window.CurrentVideoConfig)&&void 0!==e&&null!==(t=e.advertising)&&void 0!==t&&t.houseAd||null!==(n=window.CurrentVideoConfig)&&void 0!==n&&null!==(i=n.advertising)&&void 0!==i&&i.houseAds){var a=(window.tycheData.rewardedVideo||{}).backfill;if(!window.rewardedVideo||window.rewardedVideo&&"video_house_ad"===a)return void r.requestHouseAd()}if(r.adPlayer&&(r.adPlayer.remove(),r.adPlayer.removeEventListener(o.a.ERROR,r._onAdError),r.adPlayer=null),r.removeEventListener(o.a.Media.Event.LOADED,r._onAdMediaLoaded),!r.aborted){var d;if(!r.selectedServer||r._dcTimeoutReached)return r.resetStatus(),r._dispatchEvent(o.a.Ad.Event.FAILED),void Be.warn("Daisy chain timeout reached",{groupName:"2-AdServer",serverName:null===(d=r.selectedServer)||void 0===d?void 0:d.type});r.selectedServer.type!==o.a.Ad.Server.SPOTX&&r.selectedServer.type!==o.a.Ad.Server.SPOTX_SDK&&r.selectedServer.type!==o.a.Ad.Server.DFP?(r._selectedTag&&window.SSTracker.fail(),r.config===window.PlayerSettings.embedAds&&(r.config=window.CurrentVideoConfig.advertising,r.createServers()),r.dfpServer||r.spotxServer||r.spotxSdkServer?(De.warn("Custom tag failed",{tag:r._selectedTag}),window.postLogMessage("Self-service tag failed.","warn"),r._backfilling=!0,r.triedCampaigns=[],r.selectedServer=r.dfpServer||r.spotxServer||r.spotxSdkServer,window.AdSession.fail(),window.setTimeout((function(){De.info("Starting a new ad session"),r._start()}),100)):(r._selectedTag&&r.recordCustomAdImpression(),De.info("No Ad",{ts:Date.now()}),Be.warn("No ad response",{groupName:"2-AdServer",server:r.selectedServer}),window.postLogMessage("No Ad","error"),r.resetStatus(),r._dispatchEvent(o.a.Ad.Event.FAILED))):"overlay"===r.timing?(r._backfilling&&(r.recordCustomAdImpression(),window.SSTracker.backfillFail(r._selectedTag)),r.resetStatus(),De.info("No overlay Ad"),window.postLogMessage("No overlay Ad","error"),r._dispatchEvent(o.a.Ad.Event.FAILED)):(r._backfilling&&(r.recordCustomAdImpression(),window.SSTracker.backfillFail(r._selectedTag)),De.info("No Ad",{ts:Date.now()}),window.postLogMessage("No Ad","error"),r.resetStatus(),r._dispatchEvent(o.a.Ad.Event.FAILED))}}}},{key:"handleXMLResponse",value:function(e,t){var i=this;if(t!==i._currentRequestId||i.aborted)return De.warn("Request id does not match the current id",{requestId:t,currentRequestId:i._currentRequestId}),Be.error("Request id does not match the current id",{groupName:"4-VastParser",requestId:t,currentRequestId:i._currentRequestId}),void Object(c.e)("vastType","error");if(i.selectedServer.type===o.a.Ad.Server.SPOTX_SDK)return Object(c.e)("vastType","vast"),i.type=o.a.Ad.Type.VAST,void i._parseVAST(e,t);if(i._dcTimeoutReached)return De.warn("Received a response from ad server but daisy chain timeout limit has been reached, exit."),window.postLogMessage("Received a response from ad server but timeout limit has been reached, exit.","error"),window.AdRequest.fail("Daisy-chain timeout"),Be.error("Daisy-chain timeout",{groupName:"2-AdServer",requestId:t}),void window.kinesis.send("bolt_ad_errors",{tag:i._selectedTag,message:"Daisy-chain timeout"},"boltAds");if(null===e)return window.kinesis.send("bolt_ad_errors",{tag:i._selectedTag,serverType:i.selectedServer.type,message:"Bad response"},"boltAds"),Object(c.e)("vastType","error"),void i._retryAdRequest("Bad response");i.vastDoc=e,window.benchmarksHelper.measure("bolt_daisyChain_parsing");var r=Object(a.K)(e);if(window.benchmarksHelper.measure("bolt_daisyChain_parsing"),null===r?i.type="unknown":void 0!==r.VAST?i.type=o.a.Ad.Type.VAST:i.type="unknown",De.debug("Received a response",e),window.postLogMessage("Received a response","success"),Object(c.e)("vastType",i.type),i.type===o.a.Ad.Type.VAST){var d=e.getElementsByTagName("VASTAdTagURI")[0];Object(c.e)("vastType",d?"vast-wrapper":"vast");var l=function(){var t;try{t=e.getElementsByTagName("Ad")[0]}catch(e){}return t}();if(void 0!==l){if("overlay"===i.timing&&(i.type=o.a.Ad.Type.OVERLAY),i.campaignId=l.id,Object(c.e)("adCampaignId",i.campaignId||"no"),i.campaignId&&(i.selectedServer.type===o.a.Ad.Server.SPOTX?(i.triedCampaigns.push(ue.f(i.campaignId)),window.AdRequest.campaignId=ue.f(i.campaignId)):(i.triedCampaigns.push(i.campaignId),window.AdRequest.campaignId=i.campaignId)),d){var u=d.textContent;try{i.thirdPartyTag=Object(a.E)(u)}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack})}if(-1!==u.indexOf("adotube.com")&&"preroll"!==i.timing)return De.debug("Received Adotube tag not in preroll. Retrying."),void i._retryAdRequest("Received Adotube tag, but not in a preroll.");if(-1!==u.indexOf("delivery.vidible.tv")&&"preroll"!==i.timing)return De.debug("Received AOL tag not in preroll. Retrying."),void i._retryAdRequest("Received AOL tag, but not in a preroll.")}else De.info("No VAST Ad tag URI.");"true"===l.getAttribute("moatAnalytics")?(De.debug("Found MOAT analytics switch"),window.postLogMessage("MOAT analytics is enabled"),n.e(17).then(n.bind(null,119)).then((function(e){var t=e.default;i.MoatAnalytics=t,i.MoatAnalytics.container=i.container,i.MoatAnalytics.configure({level1:l.getAttribute("moatAdvertiser"),level2:l.getAttribute("moatCampaign"),level3:l.getAttribute("moatLineItem"),level4:l.getAttribute("moatCreative"),slicer1:l.getAttribute("moatSite"),slicer2:l.getAttribute("moatPlacement"),partnerCode:l.getAttribute("moatPartnerCode")})})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})}))):(i.MoatAnalytics=null,i._parseVAST(e,t))}else De.warn("Empty VAST document."),Be.error("Empty VAST document",{groupName:"4-VastParser",requestId:t}),Object(c.e)("vastType","empty"),Object(s.c)({code:101,message:"Empty VAST received"}),window.kinesis.send("bolt_ad_errors",{tag:i._selectedTag,serverType:i.selectedServer.type,message:"Empty VAST document"},"boltAds"),i.selectedServer.type===o.a.Ad.Server.SPOTX?i._fail():i._retryAdRequest("Bad response")}else De.warn("bad response from ad server"),i._retryAdRequest("Bad response")}},{key:"_parseVAST",value:function(e,t){var n=this;De.info("Processing VAST XML",{xml:e}),window.postLogMessage("Processing VAST XML"),window.benchmarksHelper.measure("bolt_daisyChain_parsing"),new N(e,(function(e,i){n.ads=e,n.successfulVASTResponse(e,t,i)}))}},{key:"successfulVASTResponse",value:function(e,t,n){var i=this;if(window.benchmarksHelper.measure("bolt_daisyChain_parsing"),window.benchmarksHelper.track("bolt_daisyChain_parsing"),n&&(window.postLogMessage("VAST XML has been processed. ".concat(n?"CPM: ".concat(n.toString()):"")),De.info("VAST XML has been processed",{cpm:n?n.toString():""})),t===i._currentRequestId&&!i.aborted)return i._dcTimeoutReached?(De.warn("Received a VAST ad but daisy chain timeout limit has been reached, exit."),window.postLogMessage("Received a VAST ad but timeout limit has been reached, exit.","error"),void window.AdRequest.fail("Timeout")):void(null==e?(De.warn("Empty VAST document"),Object(c.e)("vastType","empty"),i._retryAdRequest("Empty VAST document.")):(i.ad=e.getAd(!0),Object(c.e)("vastType","vast"),Object(c.e)("isAdPod",e.isAdPod),Object(c.e)("vastAdSize",e.ads.length),e.isAdPod&&(Object(c.e)("adPodSize",e.getAdsCount()),Object(c.a)("adPodSequence",e.getCurrentIndex())),i._parseSelectedAdAndPlay()))}},{key:"_parseSelectedAdAndPlay",value:function(){var e=this,t=[o.a.Mime.JS,o.a.Mime.XJS,o.a.Mime.MP4,o.a.Mime.WEBM,o.a.Mime.OGG],n=Object(a.p)(),i=e.ad.linear.getAllMedias(),r=Object(a.j)(i),d=Object(a.d)(r),s=Object(a.g)(d,t);if(e.bestMedia=Object(a.h)(s,n),null!==e.bestMedia){this.previousStatus=this.status,e.status="media_located",De.info("Found a playable ad media file",e.bestMedia),/dcm/i.test(e.ad.properties.AdSystem)||/googleapis.com\/.*\/vpaid_adapter.js$/.test(e.bestMedia.src)||window.tagTestUrl&&window.googleIma?(window.postLogMessage("Found a Google DCM VAST/VPAID"),e.provider=o.a.Ad.Provider.GOOGLE,e.type=o.a.Ad.Type.GOOGLE_DCM_VPAID):(window.postLogMessage("Found a playable ad media file :".concat(e.bestMedia.src)),e.bestMedia.type!==o.a.Mime.JS&&e.bestMedia.type!==o.a.Mime.XJS||(e.type=o.a.Ad.Type.JS_VPAID,e.bestMedia.src.indexOf("yume_vpaid.js")>-1?e.provider=o.a.Ad.Provider.YUME:e.bestMedia.src.indexOf("vidible.tv")>-1?e.provider=o.a.Ad.Provider.AOL:/spotxcdn.com/.test(e.bestMedia.src)?e.provider=o.a.Ad.Provider.SPOTX:/redir.adap.tv/.test(e.bestMedia.src)?e.provider=o.a.Ad.Provider.ADAP:/moatwrapper.js/.test(e.bestMedia.src)?e.provider=o.a.Ad.Provider.MOAT:/s-static.innovid.com/i.test(e.bestMedia.src)?e.provider=o.a.Ad.Provider.INNOVID:/ds.serving-sys.com\/.*\/VPAIDAPI.js$/i.test(e.bestMedia.src)?(e.provider=o.a.Ad.Provider.SIZMEK,e.type=o.a.Ad.Type.GOOGLE_DCM_VPAID):/ads.celtra.com/i.test(e.bestMedia.src)?e.provider=o.a.Ad.Provider.CELTRA:e.provider="generic",(e.config.useIMAForVPAID||window.tagTestUrl&&window.googleIma)&&(window.postLogMessage("Playing JS VPAID with IMA SDK"),e.type=o.a.Ad.Type.GOOGLE_DCM_VPAID)));var l=function(){e.MoatAnalytics?e.MoatAnalytics.init({duration:e.ad.linear.getDuration(),videoUrl:e.bestMedia},(function(){e.playAd()})):e.playAd()};if(Be.info("VAST document parsed and media file chosen",{groupName:"4-VastParser",mediaFile:e.bestMedia,vastType:e.type,provider:e.provider}),Object(c.e)("vastType",e.type),Object(c.e)("vastVendor",e.provider),Be.info("VAST document parsed and media file chosen",{groupName:"4-VastParser",mediaFile:e.bestMedia,vastType:e.type,provider:e.provider}),Object(c.e)("vastType",e.type),Object(c.e)("vastVendor",e.provider),Object(c.e)("vastMediaFile",e.bestMedia.src),e.ad.linear.parameters&&Object(c.e)("spotxData",Object(c.b)(e.ad.linear.parameters)),e.sequentialPrerollAdRequested){e.previousStatus=e.status;var u=0,p=window.setInterval((function(){window.PlayerView.currentPlayer.ended?(window.clearTimeout(p),l()):++u>1e3*o.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS&&window.clearTimeout(p)}),10)}else l()}else De.info("No playable ad media"),e._retryAdRequest("No playable ad media.")}},{key:"processCustomGoogleAd",value:function(){var e=this;if(!e.aborted){if(e._dcTimeoutReached)return De.warn("About to process custom google ad but daisy chain timeout limit has been reached."),void window.postLogMessage("About to process custom google ad but timeout limit has been reached","error");e.videoElement&&(e.videoElement.style.display="none"),e.type=o.a.Ad.Type.GOOGLE,e.playAd()}}},{key:"initSpotxSDK",value:function(e){var t=this;if(!t.aborted)return t._dcTimeoutReached?(De.warn("About to initialize SpotX SDK ad but daisy chain timeout limit has been reached."),void window.postLogMessage("About to initialize SpotX SDK ad but timeout limit has been reached.","error")):void n.e(27).then(n.bind(null,120)).then((function(n){var i=n.default;t.SpotxSdk=new i,t.SpotxSdk.getVASTAd().then((function(n){var i;t.campaignId=n.getElementsByTagName("Ad")[0].id||"",window.AdSession.start(t._backfilling),t.ad=n,t.handleXMLResponse(t.ad,e);try{i=decodeURIComponent(t.src)}catch(e){i=t.src}De.info("Processing VAST XML from SpotxSDK",{ad:t.ad,src:i}),window.postLogMessage("Loading SpotX SDK tag: ".concat(i))})).catch((function(e){De.warn("Caught Error",{message:e.message,stack:e.stack}),t._fail()}))})).catch((function(e){De.warn("Caught Error",{message:e.message,stack:e.stack})}))}},{key:"initGoogleDFPSDK",value:function(e){var t=this;if(!t.aborted){if(t._dcTimeoutReached)return De.debug("About to initialize Google IMA SDK for DFP but timeout limit has been reached",{requestId:e}),void window.postLogMessage("About to initialize Google IMA SDK for DFP but timeout limit has been reached.","error");window.AdSession.start(),window.postLogMessage("Google DFP ad.  Request ID: ".concat(e)),t.selectedServer.attempts=t.selectedServer.attempts||1,1===t.selectedServer.attempts?(De.info("Ad attempt #".concat(t.selectedServer.attempts," of ").concat(t.selectedServer.maxAttempts)),window.postLogMessage("Attempt #".concat(t.selectedServer.attempts," of ").concat(t.selectedServer.maxAttempts)),window.AdRequest.start(t.src,null,t.selectedServer.attempts,t.bid)):window.AdRequest.start(t.src,null,t.selectedServer.attempts),window.AdRequest.campaignId=t.campaignId,n.e(10).then(n.bind(null,121)).then((function(e){var n=e.default;t.provider=o.a.Ad.Provider.GOOGLE,t.type=o.a.Ad.Type.GOOGLE_DCM_VPAID,t.adPlayer=new n,t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})}))}}},{key:"trackVMAPEvent",value:function(e){this.selectedVMAPBreak.trackingEvents&&(De.debug("Tracking vmap event",{event:e}),window.postLogMessage("Tracking vmap ".concat(e)),this.selectedVMAPBreak.trackingEvents.track(e))}},{key:"_killDCTimeout",value:function(){var e=this;e._dcTimeout&&(De.debug("Kill DC timeout"),clearTimeout(e._dcTimeout),e._dcTimeout=null)}},{key:"_spotxSdkPlayer",value:function(){var e=this;e.selectedServer.attempts=e.selectedServer.attempts||1,1===e.selectedServer.attempts?window.AdRequest.start(e.src,null,e.selectedServer.attempts,e.bid):window.AdRequest.start(e.src,null,e.selectedServer.attempts),window.AdRequest.campaignId=e.campaignId,e.adPlayer=new _e(e.bestMedia,e.ad.linear.parameters),e._playCb()}},{key:"_playCb",value:function(){var e,t=this;if(!t.aborted){if(t.adShouldBeQueued)return t._dispatchEvent(o.a.Ad.Event.QUEUED,{requestAdAPI:!0,adFilled:!0}),void t.adQueue.push(t.ad);De.debug("Trying to play the ad in ".concat((Date.now()-t._dcStartTime)/1e3," secs after daisy-chain began")),window.postLogMessage("Trying to play the ad in ".concat((Date.now()-t._dcStartTime)/1e3," secs after daisy-chain began")),Be.info("Trying to play the ad",{groupName:"5-AdPlayer",adPlayer:t.adPlayer.type,serverType:null===(e=t.selectedServer)||void 0===e?void 0:e.type,vastType:t.type}),Object(c.e)("playerType",t.adPlayer.type||"undefined"),Object(c.e)("vastType",t.type||"undefined"),t.selectedServer&&t.selectedServer.type!==o.a.Ad.Server.DFP&&(t.selectedServer.type===o.a.Ad.Server.GENERIC_GOOGLE||t.isUsingVMAP&&t.type===o.a.Ad.Type.GOOGLE||t.selectedServer.type===o.a.Ad.Server.DFP?t.adPlayer.customTag=t.src:t.type===o.a.Ad.Type.GOOGLE_DCM_VPAID&&(t.adPlayer.customTag=t.src.replace(";acao=*",""),De.info("Tag for Google Player ",{tag:t.adPlayer.customTag}))),t._dcTimeout||t._isDcDisabled||t.startDCTimer(),t.adPlayer.addOnceEventListener(o.a.ERROR,t._onAdError),t.addOnceEventListener(o.a.Media.Event.LOADED,t._onAdMediaLoaded);try{window.kinesis.send("benchmarks",{type:"ads_loadNewTag_to_playCb",duration:Date.now()-t.adLoadTimeStart},"app")}catch(e){De.warn("Caught Error",{message:e.message,stack:e.stack})}if(t.adLoadTimeStart=null,De.info("Ad load time",{ttl:Date.now()-t.adLoadTimeStart}),t.adQueue.length>0||!t.adShouldBeQueued){t.adQueue.length>0&&(t.ad=t.adQueue.pop(),t.adQueue.length=0);try{t.adPlayer.playAd(),t._dispatchEvent(o.a.Ad.Event.READY)}catch(e){throw Object(s.b)(e)}window.prerollAdAmt&&(t._adPlays+=1)}}}},{key:"playAd",value:function(){var e,t=this;try{e=JSON.parse(t.ad.linear.parameters).ad_id}catch(e){De.debug("Unable to JSON parse creative data inside spotx adapter")}if(!t.aborted)if(window.AdRequest.adType=t.type,window.AdRequest.network=t.provider,t.type!==o.a.Ad.Type.GOOGLE&&t.type!==o.a.Ad.Type.DISPLAY_BACKFILL&&t.type!==o.a.Ad.Type.HOUSE_AD&&window.AdRequest.setMedia(t.bestMedia.src,t.bestMedia.type),t.container.style.visibility="visible",t.type===o.a.Ad.Type.VAST)Promise.all([n.e(1),n.e(28)]).then(n.bind(null,134)).then((function(e){var n=e.default;t.adPlayer=new n(t),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})}));else if(t.type===o.a.Ad.Type.JS_VPAID)De.info("Playing JS VPAID ",t.provider),t.provider===o.a.Ad.Provider.YUME?n.e(29).then(n.bind(null,122)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.AOL?n.e(6).then(n.bind(null,123)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.SPOTX?t.selectedServer.type===o.a.Ad.Server.SPOTX_SDK&&t.selectedServer.spotxChannelId?t._spotxSdkPlayer():n.e(26).then(n.bind(null,124)).then((function(e){var n=e.default;t.adPlayer=new n(t,t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.ADAP?n.e(2).then(n.bind(null,125)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.MOAT?n.e(18).then(n.bind(null,126)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.CELTRA?n.e(7).then(n.bind(null,127)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):t.provider===o.a.Ad.Provider.INNOVID?n.e(14).then(n.bind(null,128)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):Promise.resolve().then(n.bind(null,17)).then((function(e){var n=e.default;t.adPlayer=new n(t.bestMedia,t.ad.linear.parameters),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})),e&&window.postLogMessage("Attempting to try Campaign ID: <strong><u>".concat(e,"</u></strong>"));else if(t.type===o.a.Ad.Type.GOOGLE||t.type===o.a.Ad.Type.GOOGLE_DCM_VPAID)"overlay"===t.timing?n.e(11).then(n.bind(null,129)).then((function(e){var n=e.default;t.adPlayer=new n(t),t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})})):n.e(10).then(n.bind(null,121)).then((function(e){var n=e.default;De.debug("Requiring google ads player"),t.adPlayer=new n,t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})}));else if(t.type===o.a.Ad.Type.OVERLAY)t.provider===o.a.Ad.Provider.COULL&&t._retryAdRequest("COULL overlay is no longer supported");else if(t.type===o.a.Ad.Type.DISPLAY_BACKFILL)n.e(8).then(n.bind(null,130)).then((function(e){var n=e.default;t.adPlayer=new n,t._playCb()})).catch((function(e){De.error("Caught error",{message:e.message,stack:e.stack})}));else if(t.type===o.a.Ad.Type.HOUSE_AD){var i=Object(se.g)(window.CurrentVideoConfig.advertising);void 0!==i?n.e(13).then(n.bind(null,131)).then((function(e){var n=e.default;t.adPlayer=new n(i),t._playCb()})):(De.info("No house ad setup"),window.BoltAdManager._dispatchEvent(o.a.Ad.Event.FAILED))}}},{key:"getDuration",value:function(){return this.adPlayer.getDuration()}},{key:"getCurrentTime",value:function(){var e=this.adPlayer.getCurrentTime();return void 0===e&&(e=0),e}},{key:"getPercentPlayed",value:function(){var e=this;return null!==e.getCurrentTime()&&null!==e.getDuration()?e.getCurrentTime()/e.getDuration()*100:null}},{key:"getVolume",value:function(){return this.adPlayer.getVolume()}},{key:"pause",value:function(){this.adPlayer.pause()}},{key:"resume",value:function(){this.adPlayer.resume()}},{key:"setVolume",value:function(e){De.debug("Set player volume",{func:"setVolume",value:e}),this.adPlayer.setVolume(e),this.currentVolume=e}},{key:"mute",value:function(){this.currentVolume=this.getVolume(),this.adPlayer.setVolume(0),this._dispatchEvent(o.a.Media.Event.MUTED)}},{key:"unmute",value:function(){this.adPlayer.setVolume(this.currentVolume),this._dispatchEvent(o.a.Media.Event.UNMUTED)}},{key:"remove",value:function(){this.adPlayer&&(De.info("Ad player removed"),window.postLogMessage("Ad player removed"),this.adPlayer.remove()),this.resetStatus()}},{key:"abort",value:function(e){"none"===this.status||this.aborted||(this.aborted=!0,De.warn("Ad aborted"),window.AdRequest.abort(),this.linearAdPool.drain(),this.overlayAdPool.drain(),this._dispatchEvent(o.a.Ad.Event.ABORTED),this.remove()),e&&e()}},{key:"isLinear",value:function(){return this._isLinear}},{key:"recordCustomAdImpression",value:function(){try{window.SSTracker.recordImpression()}catch(e){throw Object(s.b)(e)}}},{key:"dispatchQueueEvent",value:function(e){this._dispatchEvent(o.a.Ad.Event.QUEUED),e&&setTimeout((function(){De.debug("Invoking callback after ".concat(o.a.Ad.QUEUE_WAIT),{func:"dispatchQueueEvent"}),e()}),o.a.Ad.QUEUE_WAIT)}}])&&Pe(t.prototype,i),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.a)},17:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var i=n(1),r=n(3),a=n(0),o=n(6),d=n(20),s=n(10);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){d=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(d)throw a}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=new i.a("LINEAR-JSVPAID"),k=function(){function e(t){b(this,e),_(this,"loader",void 0),_(this,"vpaid",void 0),_(this,"_timer",void 0),_(this,"containerWidth",void 0),_(this,"containerHeight",void 0),S.debug("JS playback");var n=this;n.loader=t,n.vpaid=t.vpaid,n._timer=null}return A(e,[{key:"videoStarted",value:function(){}},{key:"durationChanged",value:function(){var e=this;S.info("Ad duration changed",{remainingTime:e.vpaid.getAdRemainingTime(),duration:e.vpaid.getAdDuration()}),e.loader.duration<=0&&(e.loader.sourceChanged=!0,e.loader.duration=e.loader.vpaid.getAdDuration(),e.loader._dispatchEvent(r.a.Media.Event.DURATION_CHANGE,e.loader.duration),window.BoltAdManager._dispatchEvent(r.a.Media.Event.PLAYING),e._timer=setInterval((function(){e._updateTime()}),50))}},{key:"_updateTime",value:function(){this.loader._setCurrentTime(this.getCurrentTime())}},{key:"getCurrentTime",value:function(){return this.loader.duration>0?this.loader.duration-this.vpaid.getAdRemainingTime():0}},{key:"setVolume",value:function(e){this.volume=e,0!==this.volume&&1!==this.volume?(this.vpaid&&(this.vpaid.adVolume&&(this.vpaid.adVolume=e),this.vpaid.setAdVolume(e)),this._dispatchEvent(r.a.UI.Event.CHANGE_VOLUME,e)):this.mute(!!e)}},{key:"destroy",value:function(){clearInterval(this._timer)}}]),e}(),T=function(){function e(t){b(this,e),_(this,"loader",void 0),S.debug("Native playback");var n=this;n.loader=t,n._onVideoMetadata=n._onVideoMetadata.bind(n),n._onVideoEnded=n._onVideoEnded.bind(n),n._onVideoTimeupdate=n._onVideoTimeupdate.bind(n),n._onVideoPaused=n._onVideoPaused.bind(n),n._onVideoPlaying=n._onVideoPlaying.bind(n),n._onVideoError=n._onVideoError.bind(n),window.BoltAdManager.videoElement.addEventListener("loadeddata",n._onVideoMetadata),window.BoltAdManager.videoElement.addEventListener("ended",n._onVideoEnded),window.BoltAdManager.videoElement.addEventListener("pause",n._onVideoPaused),window.BoltAdManager.videoElement.addEventListener("playing",n._onVideoPlaying),window.BoltAdManager.videoElement.addEventListener("error",n._onVideoError)}return A(e,[{key:"videoStarted",value:function(){var e,t=this;S.info("Video started"),window.BoltAdManager.videoElement.style.visibility="visible",window.BoltAdManager.videoElement.style.display="block",t.loader.sourceChanged=!0,t.loader.duration=window.BoltAdManager.videoElement.duration,t.loader._dispatchEvent(r.a.Media.Event.DURATION_CHANGE,t.loader.duration),t.loader._dispatchEvent(r.a.Media.Event.PLAYING),window.BoltAdManager.videoElement.addEventListener("timeupdate",t._onVideoTimeupdate),window.parent.postMessage(JSON.stringify({id:window.id,action:"addImpressionEventId",data:null===(e=window.BoltAdManager)||void 0===e?void 0:e.campaignId}),Object(a.k)())}},{key:"durationChanged",value:function(){}},{key:"_onVideoMetadata",value:function(){S.info("Event CB",{evt:"_onVideoMetadata"});window.BoltAdManager.videoElement.removeEventListener("loadedmetadata",this._onVideoMetadata),this.loader.metadata={duration:window.BoltAdManager.videoElement.duration}}},{key:"_onVideoEnded",value:function(){}},{key:"_onVideoPaused",value:function(){}},{key:"_onVideoPlaying",value:function(){}},{key:"_onVideoError",value:function(){window.kinesis.send("bolt_ad_errors",{message:"Ad video error",provider:this.loader.provider,creativeUrl:window.BoltAdManager.bestMedia,tag:window.BoltAdManager._selectedTag,adId:JSON.parse(window.BoltAdManager.ad.linear.parameters).ad_id},"boltAds"),Object(s.c)({code:901,message:"Ad video error"})}},{key:"_onVideoTimeupdate",value:function(){this.loader._setCurrentTime(this.getCurrentTime())}},{key:"getCurrentTime",value:function(){return window.BoltAdManager.videoElement.currentTime}},{key:"setVolume",value:function(e){window.BoltAdManager.videoElement.volume=e}},{key:"destroy",value:function(){var e=this;window.BoltAdManager.videoElement.removeEventListener("loadedmetadata",e._onVideoMetadata),window.BoltAdManager.videoElement.removeEventListener("ended",e._onVideoEnded),window.BoltAdManager.videoElement.removeEventListener("pause",e._onVideoPaused),window.BoltAdManager.videoElement.removeEventListener("playing",e._onVideoPlaying),window.BoltAdManager.videoElement.removeEventListener("timeupdate",e._onVideoTimeupdate),window.BoltAdManager.videoElement.removeEventListener("error",e._onVideoError),window.BoltAdManager.videoElement.removeAttribute("src"),window.BoltAdManager.videoElement.load()}}]),e}(),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(n,e);var t=g(n);function n(e,i){var a;b(this,n),_(m(a=t.call(this)),"vpaidScript",void 0),_(m(a),"video",void 0),_(m(a),"type",void 0),_(m(a),"creativeData",void 0),_(m(a),"paused",!1),_(m(a),"frame",null),_(m(a),"vpaid",null),_(m(a),"currentTime",null),_(m(a),"duration",null),_(m(a),"sourceChanged",!1),_(m(a),"fullscreen",!1),_(m(a),"volume",0),_(m(a),"muted",!0),_(m(a),"hasStarted",!1),_(m(a),"timer",null),_(m(a),"_firstQuartile",!1),_(m(a),"_midpoint",!1),_(m(a),"_thirdQuartile",!1),_(m(a),"_error",!1),_(m(a),"_adHandler",null),_(m(a),"provider",null),_(m(a),"_nativePlayback",!1),_(m(a),"_autoplayPolicyChecked",!1),_(m(a),"_onAdImpression",(function(e){var t=window.Bolt;t.dispatchEvent(t.BOLT_AD_IMPRESSION,{name:t.BOLT_AD_IMPRESSION}),S.info("Event CB",{evt:"_onAdImpression",value:e,provider:a.provider})}));var o=m(a);return o.video=window.BoltAdManager.videoElement,o.type=r.a.Ad.Type.JS_VPAID,o.creativeData=i,o.muted=!0,window.BoltAdManager.VpaidSdk={},window.BoltAdManager.VpaidSdk.stickyResize=o.stickyResize.bind(o),o._setNativePlayback=o._setNativePlayback.bind(o),void 0!==document.visibilityState&&(o._handleVisibilityChange=o._handleVisibilityChange.bind(o)),o._onAdLoaded=o._onAdLoaded.bind(o),o._onAdStarted=o._onAdStarted.bind(o),o._onAdStopped=o._onAdStopped.bind(o),o._onAdError=o._onAdError.bind(o),o._onAdLog=o._onAdLog.bind(o),o._onAdClick=o._onAdClick.bind(o),o._onAdVideoStart=o._onAdVideoStart.bind(o),o._onAdDurationChanged=o._onAdDurationChanged.bind(o),o._onAdPaused=o._onAdPaused.bind(o),o._onAdPlaying=o._onAdPlaying.bind(o),o._onAdFirstQuartile=o._onAdFirstQuartile.bind(o),o._onAdMidpoint=o._onAdMidpoint.bind(o),o._onAdThirdQuartile=o._onAdThirdQuartile.bind(o),o._onAdSkipped=o._onAdSkipped.bind(o),a}return A(n,[{key:"_setNativePlayback",value:function(){this._nativePlayback=!0,window.BoltAdManager.videoElement.removeEventListener("loadstart",this._setNativePlayback)}},{key:"_handleVisibilityChange",value:function(){var e,t=this;(S.info("Event CB",{evt:"handleVisibilityChange",value:document.visibilityState}),"hidden"===document.visibilityState)?window.PlayerView.fullscreenRequested||t.paused||null===(e=t.vpaid)||void 0===e||e.pauseAd():t.paused&&t.vpaid.resumeAd()}},{key:"playAd",value:function(){var e=this;S.info("Play ad",{provider:e.provider,func:"playAd"}),window.postLogMessage("Loading ".concat(e.provider," JS VPAID"));var t=r.a.Ad.PLAYER_ID_PREFIX+window.BoltAdManager.containerId;window.client.isMobile?(window.BoltAdManager.videoElement||(window.BoltAdManager.videoElement=document.createElement("video"),S.warn("Video element is undefined")),window.BoltAdManager.videoElement.setAttribute("width",e.container.clientWidth),window.BoltAdManager.videoElement.setAttribute("height",e.container.clientHeight),window.BoltAdManager.videoElement.setAttribute("style","position:absolute;top:0;left:0;bottom:0;right:0;height:".concat(e.container.clientHeight,"px;width:").concat(e.container.clientWidth,"px")),e.containerWidth=e.container.clientWidth,e.containerHeight=e.container.clientHeight,e._nativePlayback=!0):(window.BoltAdManager.videoElement=document.createElement("video"),window.BoltAdManager.videoElement.setAttribute("id",t),window.BoltAdManager.videoElement.setAttribute("width",e.container.clientWidth),window.BoltAdManager.videoElement.setAttribute("height",e.container.clientHeight),window.BoltAdManager.videoElement.setAttribute("style","position:absolute;top:0;left:0;bottom:0;right:0;height:".concat(e.container.clientHeight,"px;width:").concat(e.container.clientWidth,"px")),e.containerWidth=e.container.clientWidth,e.containerHeight=e.container.clientHeight,e.container.appendChild(window.BoltAdManager.videoElement),window.BoltAdManager.videoElement.addEventListener("loadstart",e._setNativePlayback)),e._createVPAID(),Object(a.J)()}},{key:"pauseAd",value:function(){var e;null===(e=this.vpaid)||void 0===e||e.pauseAd()}},{key:"stickyResize",value:function(e,t){var n=this,i=n.container.querySelector("iframe"),r=n.container.querySelector("video");n.container&&(n.container.style.width="".concat(e,"px"),n.container.style.height="".concat(t,"px")),i&&(i.style.width="".concat(e,"px"),i.style.height="".concat(t,"px"),i.width=e,i.height=t),r&&(r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px"),r.width=e,r.height=t)}},{key:"initHeavyAdListener",value:function(){if(void 0!==window.ReportingObserver){var e=function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var i,r,o=t.value,d=u({product:"bolt",type:"heavyAd",id:"pwHeavyAdIntervention",url:o.url,ad:!0,content:!1,campaignId:null===(i=window.BoltAdManager)||void 0===i?void 0:i.campaignId,adType:null===(r=window.BoltAdManager)||void 0===r?void 0:r.provider,reportType:o.type},o.body),s={id:window.id,type:"heavyAd",msgData:d};S.debug("[LinearJSVPAID] receiving heavy-ad message from VPAID"),window.parent.postMessage(JSON.stringify(s),Object(a.k)())}}catch(e){n.e(e)}finally{n.f()}},t=new window.ReportingObserver((function(t,n){e(t)}),{buffered:!0});t.observe(),window.addEventListener("pagehide",(function(n){var i=t.takeRecords();e(i)}))}}},{key:"_createVPAID",value:function(){var e=this,t=e.container;e.frame=document.createElement("iframe"),e.frame.setAttribute("allow","autoplay; fullscreen"),e.frame.id="pw_ad_iframe",e.frame.frameBorder=0,e.frame.allowfullscreen=!0,e.frame.style.display="none",e.frame.onload=function(){var t=e.frame.contentWindow.document.createElement("script");e.vpaidScript=t,t.src=window.BoltAdManager.bestMedia.src,Object(o.b)(e.container),t.onload=function(){e.vpaid=e.frame.contentWindow.getVPAIDAd(),e.vpaid.handshakeVersion("2.0"),e.vpaid.subscribe(e._onAdLoaded,"AdLoaded"),e.vpaid.subscribe(e._onAdStarted,"AdStarted"),e.vpaid.subscribe(e._onAdImpression,"AdImpression"),e.vpaid.subscribe(e._onAdStopped,"AdStopped"),e.vpaid.subscribe(e._onAdError,"AdError"),e.vpaid.subscribe(e._onAdLog,"AdLog"),e.vpaid.subscribe(e._onAdClick,"AdClickThru"),e.vpaid.subscribe(e._onAdVideoStart,"AdVideoStart"),e.vpaid.subscribe(e._onAdDurationChanged,"AdDurationChange"),e.vpaid.subscribe(e._onAdPaused,"AdPaused"),e.vpaid.subscribe(e._onAdPlaying,"AdPlaying"),e.vpaid.subscribe(e._onAdSkipped,"AdSkipped"),e.creativeData=e._getCreativeData(),e.environmentVars=e._getEnvironmentVars(),S.debug("Creative data",e.creativeData),S.debug("Environment vars",e.environmentVars);try{e.vpaid.initAd(window.BoltAdManager.videoElement.offsetWidth,window.BoltAdManager.videoElement.offsetHeight,"normal",600,e.creativeData,e.environmentVars)}catch(t){e._handleError("VPAID init failed"),Object(o.f)(e.container),window.BoltAdManager._dispatchEvent(r.a.Ad.Event.FAILED)}},e.initHeavyAdListener(),e.frame.contentDocument.body.style.margin="0px",e.frame.contentDocument.body.style.cursor="pointer",e.frame.contentWindow.document.body.appendChild(t)},t.appendChild(e.frame)}},{key:"_getEnvironmentVars",value:function(){return{slot:window.BoltAdManager.container,videoSlot:window.BoltAdManager.videoElement,videoSlotCanAutoPlay:!0}}},{key:"_getCreativeData",value:function(){return{AdParameters:this.creativeData}}},{key:"_onAdLoaded",value:function(){S.info("Event CB",{evt:"_onAdLoaded",provider:this.provider});var e=this;window.BoltAdManager._dispatchEvent(r.a.Media.Event.LOADED),e._dispatchEvent(r.a.Media.Event.DURATION_CHANGE),e._dispatchEvent(r.a.Media.Event.START_TIME_CHANGED),!1!==window.CurrentVideoConfig.settings.autoplay&&(window.BoltAdManager.videoElement.muted=!0),e.vpaid.startAd()}},{key:"_onAdStarted",value:function(){var e=this;S.info("Event CB",{evt:"_onAdStarted",provider:this.provider}),e.vpaid.unsubscribe(this._onAdStarted,"AdStarted"),Object(o.f)(e.container),e._adHandler||(!0===e._nativePlayback?e._adHandler=new T(e):!1===e._nativePlayback&&(e._adHandler=new k(e)))}},{key:"_onAdVideoStart",value:function(){var e=this,t=window.Bolt;e._adHandler||(!0===e._nativePlayback?e._adHandler=new T(e):!1===e._nativePlayback&&(e._adHandler=new k(e))),S.info("Event CB",{evt:"_onAdVideoStart",provider:this.provider}),e.vpaid.unsubscribe(e._onAdVideoStart,"AdVideoStart"),e.playing=!0,e.pause=!1,e._trackCreativeView(),window.BoltAdManager._dispatchEvent(r.a.Media.Event.LOADED),e._dispatchEvent(r.a.Media.Event.PLAY),e._adHandler.videoStarted(),t.dispatchEvent(t.BOLT_AD_VIDEO_START,{name:t.BOLT_AD_VIDEO_START}),void 0!==document.visibilityState&&(window.document.addEventListener("visibilitychange",e._handleVisibilityChange),"hidden"===window.document.visibilityState&&e.pauseAd())}},{key:"_onAdDurationChanged",value:function(){this._adHandler&&this._adHandler.durationChanged()}},{key:"_onAdStopped",value:function(){S.info("Event CB",{evt:"_onAdStopped",provider:this.provider});var e=this;e._error||(window.BoltAdManager._adPlays>=window.prerollAdAmt&&e._dispatchEvent(r.a.Media.Event.ENDED),window.BoltAdManager.ad.linear.track("complete"),clearInterval(e.timer),window.BoltAdManager._dispatchEvent(r.a.Media.Event.ENDED))}},{key:"_onAdPaused",value:function(){var e=window.Bolt;S.info("Event CB",{evt:"_onAdPaused",provider:this.provider}),this.paused=!0,window.BoltAdManager._dispatchEvent(r.a.Media.Event.PAUSED),e.dispatchEvent(e.BOLT_AD_PAUSED,{name:e.BOLT_AD_PAUSED})}},{key:"_onAdPlaying",value:function(){var e=window.Bolt;S.info("Event CB",{evt:"_onAdPlaying",provider:this.provider}),this.paused=!1,e.dispatchEvent(e.BOLT_AD_PLAYING,{name:e.BOLT_AD_PLAYING})}},{key:"_trackCreativeView",value:function(){S.info("JS VPAID trackCreativeView",{func:"_trackCreativeView",provider:this.provider}),window.BoltAdManager.ad.linear.track("creativeView"),window.BoltAdManager.ad.linear.trackImpressions(),window.BoltAdManager.ad.linear.track("start"),this.hasStarted=!0}},{key:"_setCurrentTime",value:function(e){var t=this;t.currentTime=e,t._dispatchEvent(r.a.Media.Event.TIME_UPDATE,t.currentTime),t._checkQuartiles()}},{key:"_handleError",value:function(e,t){S.warn("Event CB",{evt:"_onAdError",value:{msg:e,id:t},provider:this.provider}),"string"==typeof e?(Object(s.c)({code:901,message:"General VPAID error",data:{message:e}}),window.postLogMessage("Ad Error. ".concat(this.provider," JS VPAID says ").concat(e),"error")):(Object(s.c)({code:901,message:"General VPAID error",data:e}),window.postLogMessage("Ad Error. ".concat(this.provider," JS VPAID failed to play"),"error")),window.kinesis.send("bolt_ad_errors",{message:e,serverType:window.BoltAdManager.selectedServer.type,provider:this.provider,creativeUrl:window.BoltAdManager.bestMedia,tag:window.BoltAdManager._selectedTag,adId:JSON.parse(window.BoltAdManager.ad.linear.parameters).ad_id,vastDoc:window.BoltAdManager.vastDoc},"boltAds"),this._error=!0,this.remove()}},{key:"_onAdError",value:function(e,t){this._handleError(e,t),this._dispatchEvent(r.a.ERROR,e)}},{key:"_checkQuartiles",value:function(){var e=this;e._firstQuartile?e._midpoint?e._thirdQuartile||e.currentTime/e.duration>.75&&(e._thirdQuartile=!0,e._onAdThirdQuartile()):e.currentTime/e.duration>.5&&(e._midpoint=!0,e._onAdMidpoint()):e.currentTime/e.duration>.25&&(e._firstQuartile=!0,e._onAdFirstQuartile())}},{key:"_onAdFirstQuartile",value:function(){S.info("Event CB",{evt:"_onAdFirstQuartile",provider:this.provider}),this._dispatchEvent(r.a.Media.Event.FIRSTQUARTILE),window.BoltAdManager._dispatchEvent(r.a.Media.Event.FIRSTQUARTILE),window.BoltAdManager.ad.linear.track("firstQuartile")}},{key:"_onAdMidpoint",value:function(){S.info("Event CB",{evt:"_onAdMidpoint",provider:this.provider}),this._dispatchEvent(r.a.Media.Event.MIDPOINT),window.BoltAdManager._dispatchEvent(r.a.Media.Event.MIDPOINT),window.BoltAdManager.ad.linear.track("midpoint")}},{key:"_onAdThirdQuartile",value:function(){S.info("Event CB",{evt:"_onAdThirdQuartile",provider:this.provider}),this._dispatchEvent(r.a.Media.Event.THIRDQUARTILE),window.BoltAdManager._dispatchEvent(r.a.Media.Event.THIRDQUARTILE),window.BoltAdManager.ad.linear.track("thirdQuartile")}},{key:"_onAdSkipped",value:function(){S.info("Event CB",{evt:"_onAdSkipped",provider:this.provider}),window.BoltAdManager._dispatchEvent(r.a.Ad.Event.SKIPPED),this._onAdStopped()}},{key:"_onAdClick",value:function(){S.info("Event CB",{evt:"_onAdClick",provider:this.provider});var e=window.BoltAdManager.ad.linear,t=[];try{t=e.tracking.events.click}catch(e){}if(Array.isArray(t)&&t.length>0)for(var n=0;n<t.length;n++){var i=t[n].url;S.debug("tracking click",i),Object(a.L)({url:i,method:"get"})}window.BoltAdManager._dispatchEvent("clicked"),window.Zeus.dispatchEvent(r.a.Ad.Event.CLICKED)}},{key:"_onAdLog",value:function(e){window.postLogMessage("[JSVPAID AdLog Event] - ".concat(e)),S.info("Event CB",{evt:"_onAdLog",provider:this.provider,value:e})}},{key:"pause",value:function(){this.pauseAd()}},{key:"resume",value:function(){this.vpaid&&this.vpaid.resumeAd()}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.vpaid?this._adHandler.getCurrentTime():0}},{key:"setVolume",value:function(e){if(!window.client.isMobile||window.client.system.android)try{this.volume=e,this._dispatchEvent(r.a.Media.Event.VOLUME_CHANGED,this.volume),this._adHandler.setVolume(e)}catch(e){}}},{key:"getSource",value:function(){return window.BoltAdManager.videoElement.currentSrc||this.media}},{key:"_removeAssets",value:function(){var e=this.container.children;if(e.length>1)for(var t=0;t<e.length;t++){var n=e[t];n!==window.BoltAdManager.videoElement&&this.container.removeChild(n)}}},{key:"_removeVideoElement",value:function(){if(window.client.isMobile)window.client.system.ios&&window.PlayerView.fullscreen&&window.BoltAdManager.videoElement.webkitExitFullscreen(),this.show(!1),window.BoltAdManager.videoElement.removeAttribute("src"),window.BoltAdManager.videoElement.load();else try{window.BoltAdManager.videoElement.parentNode.removeChild(window.BoltAdManager.videoElement)}catch(e){}}},{key:"_unsubscribe",value:function(){var e=this;if(e.vpaid){S.info("unsubs vpaid events");try{e.vpaid.unsubscribe(e._onAdLoaded,"AdLoaded")}catch(e){}try{e.vpaid.unsubscribe(e._onAdStarted,"AdStarted")}catch(e){}try{e.vpaid.unsubscribe(e._onAdStopped,"AdStopped")}catch(e){}try{e.vpaid.unsubscribe(e._onAdError,"AdError")}catch(e){}try{e.vpaid.unsubscribe(e._onAdLog,"AdLog")}catch(e){}try{e.vpaid.unsubscribe(e._onAdClick,"AdClickThrough")}catch(e){}try{e.vpaid.unsubscribe(e._onAdVideoStart,"AdVideoStart")}catch(e){}try{e.vpaid.unsubscribe(e._onAdDurationChanged,"AdDurationChange")}catch(e){}try{e.vpaid.unsubscribe(e._onAdPaused,"AdPaused")}catch(e){}}}},{key:"remove",value:function(){S.info("Remove ad");var e=this;if(e._unsubscribe(),void 0!==document.visibilityState&&window.document.removeEventListener("visibilitychange",e._handleVisibilityChange),e._adHandler&&e._adHandler.destroy(),e.vpaid)try{e.vpaid.stopAd()}catch(e){}try{e.container.removeChild(e.frame)}catch(e){}e._removeAssets(),e._removeVideoElement()}},{key:"mute",value:function(e){e!==this.muted&&(this.muted=e,e?(window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.muted=!0),this.vpaid.setAdVolume(0),this._dispatchEvent(r.a.Media.Event.MUTED)):(window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.muted=!1),this.vpaid.setAdVolume(this.volume||1),this._dispatchEvent(r.a.Media.Event.UNMUTED)))}},{key:"setFullscreen",value:function(e){var t=this;e!==this.fullscreen&&(this.fullscreen=e,window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.setAttribute("width","".concat(t.container.clientWidth)),window.BoltAdManager.videoElement.setAttribute("height","".concat(t.container.clientHeight)),window.BoltAdManager.videoElement.setAttribute("style","position:absolute;top:0;left:0;bottom:0;right:0;height:".concat(t.container.clientHeight,"px;width:").concat(t.container.clientWidth,"px"))),e?this._dispatchEvent(r.a.Player.Event.ENTER_FULLSCREEN):this._dispatchEvent(r.a.Player.Event.EXIT_FULLSCREEN))}},{key:"stop",value:function(){}},{key:"show",value:function(e){var t=window.BoltAdManager.videoElement;!0===e&&"block"!==t.style.display?(S.debug("Show video",{player:this.containerId}),t.style.display="block"):!1===e&&"none"!==t.style.display&&(S.debug("Hide video",{player:this.containerId}),t.style.display="none")}},{key:"isLinear",value:function(){return!0}}]),n}(d.a)},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(15),r=n(3);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=window.BoltAdManager.container,this.containerId=window.BoltAdManager.containerId,this.type=null,this.fullscreen=!1,this._volume=0,this._duration=0,this._currentTime=0,this._isLinear=!0,(new i.a).mixin(this)}var t,n,o;return t=e,(n=[{key:"isAd",value:function(){return!0}},{key:"isLinear",value:function(){return this._isLinear}},{key:"playAd",value:function(){}},{key:"resume",value:function(){}},{key:"pause",value:function(){}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return this._currentTime}},{key:"setVolume",value:function(e){}},{key:"getVolume",value:function(){return this._volume}},{key:"mute",value:function(e){}},{key:"setFullscreen",value:function(e){}},{key:"getSource",value:function(){return window.BoltAdManager.bestMedia}},{key:"end",value:function(){window.BoltAdManager._dispatchEvent(r.a.Media.Event.ENDED)}},{key:"remove",value:function(){}},{key:"updateLayout",value:function(){}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return m}));var i=n(0),r=n(8),a=n(1),o=n(11),d=n(30);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,d=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){d=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(d)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=new a.a("SPOTX-UTILS"),u=function(e,t){var n=window.BoltAdManager,r=e;Object(o.e)("spotx.gdpr",!1,{useDaisyChainCount:!0});var a=function(){if(void 0!==window.gdprConsents)if(/\$(REGS_GDPR|USER_CONSENT)/.test(r))r=Object(i.E)(r);else{var e=/&gdpr=\d{1}/,t=/&gdpr_consent=\d{1}/,n=window.shouldReadGDPRConsents?1:0;void 0!==window.userIsInEU&&!1===window.userIsInEU&&(n=0);var a=window.gdprConsents,d=window.gdprBinary;Object(o.e)("spotx.gdpr",!0,{useDaisyChainCount:!0}),e.test(r)?r=r.replace(e,"&gdpr=".concat(n)):r+="&gdpr=".concat(n),n&&(t.test(r)?r=r.replace(t,"&gdpr_consent=".concat(a)):r+="&gdpr_consent=".concat(a),r+="&custom[got_consent]=".concat(d))}return r};if(void 0!==window.gdprConsents)n.src=a(),t();else var d=0,s=window.setInterval((function(){(void 0!==window.gdprConsents||d++>2e4)&&(window.clearInterval(s),n.src=a(),t())}),50)},p=function(e){var t,n,r=window.PlayerView.currentPlayer,a=Object(i.r)(),d=a?a.id:null;return e=function(e){var t=window.BoltAdManager;if(Object(o.e)("spotx.channelId",!1,{useDaisyChainCount:!0}),void 0!==window.spotxVastVersion&&(e=e.replace("/2.0/","/".concat(window.spotxVastVersion,"/"))),t.selectedServer&&t.selectedServer._getSpotxChannelId()){Object(o.e)("spotx.channelId",!0,{useDaisyChainCount:!0});var n="search.spotxchange.com/vast/",i=n.length+4,r=e.substring(e.indexOf(n)+i,e.indexOf(n)+i+6);return e.replace(r,t.selectedServer._getSpotxChannelId())}return e}(e),e=Object(i.E)((n=-1===(t=e).indexOf("?")?"?":"&","".concat(t).concat(n,"VPAID=js&custom_skin=1&content_page_url=__WEB_URL__&player_width=__WIDTH__&player_height=__HEIGHT__"))),Object(o.e)("spotx.websiteId",!!d,{useDaisyChainCount:!0}),e+="&x_source.pchain=playwire.com:fcddfba7adc2d929&pchain=playwire.com:fcddfba7adc2d929"+"&schain=1.0,1!playwire.com,".concat(d,",1"),!1===r.muted?e+="&ad_volume=".concat(r.volume.toFixed(2)):Object(i.t)()&&(e+="&ad_volume=0"),e},v=function(e){var t,n,a,c,u,p,v,h,g=window.BoltAdManager,f=window.CurrentVideoConfig,m="precontent"===window.PlayerSettings.playerType,y=Object(i.i)(),b=f.hostingId?f.hostingId:y,w="true";y&&(y=y.toString()),b&&(b=b.toString());try{w=Object(r.f)(g.selectedServer.tags).toString()}catch(e){l.warn("Failed to determine site tag is syndicated or not",{message:e.message,stack:e.stack})}var A=navigator.userAgent.toLowerCase().indexOf("blitz")>=0||"ads.blitz.gg"===window.site.hostname,_=Object(r.b)(),S=window.containerHeight||_.height,k=window.containerWidth||_.width;Object(o.e)("spotx.channelId",g.selectedServer.spotxChannelId,{useDaisyChainCount:!0}),e+="&custom[campaign_id]=".concat(g.triedCampaigns.length?g.triedCampaigns[g.triedCampaigns.length-1]:"0.0")+"&custom[channel]=".concat(g.selectedServer.spotxChannelId)+"&custom[content_page_url]=".concat("amp"===window.site.hostapp?window.site.href:window.parentBaseUrl)+"&custom[page_full_url]=".concat(A?window.parentBaseUrl:encodeURIComponent(window.site.href.replace(/\#.*$/,"")))+"&custom[player_height]=".concat(S)+"&custom[player_width]=".concat(k)+"&custom[adunit]=".concat(Object(i.f)())+"&custom[device_type]=".concat(window.client.isMobile?"mobile":"desktop")+"&custom[owning_pub_id]=".concat(y||"")+"&custom[player]=".concat(window.id)+"&custom[pub_id]=".concat(b||"")+"&custom[synd]=".concat(w)+"&custom[secure]=".concat(window.location.protocol.indexOf("https")>=0?"true":"false")+"&custom[vid_id]=".concat(Object(i.z)(f,"content","videoId")&&f.content.videoId||"")+"&custom[vpi]=".concat(Object(r.d)().join(","))+"&custom[vid_long_form]=".concat(f.duration>6e5?"true":"false"),Array.isArray(f.trendiChannels)&&f.trendiChannels.length>0&&(e+="&custom[trendi_channel]=".concat(encodeURIComponent(f.trendiChannels[0].toLowerCase().replace(/ /g,"_")))),Object(o.e)("spotx.videoInfo",!1,{useDaisyChainCount:!0});var T,E,P=g._adSessionCount||0;if(void 0!==window.videoInfo){Object(o.e)("spotx.videoInfo",!0,{useDaisyChainCount:!0});var C=window.videoInfo;void 0!==C.location&&(e+="&custom[vid_location]=".concat(C.location)),void 0!==C.product&&("slideshow"===C.product&&(P=C.refreshCount||g._adSessionCount),e+="&custom[product]=".concat(C.product)),void 0!==C.sticky&&(e+="&custom[sticky]=".concat(C.sticky)),void 0!==C.trendi&&(e+="&custom[trendi]=".concat(C.trendi))}if(e+="&custom[refresh_count]=".concat(P),e+="&custom[hour]=".concat(d.b()),e+="&custom[day]=".concat(d.a()),null!==(t=window.userBehavior)&&void 0!==t&&t.videoAdClickRate&&(e+="&custom[video_ad_click_rate]=".concat(window.userBehavior.videoAdClickRate)),null!==(n=window.userBehavior)&&void 0!==n&&n.videoAdCompletionRate&&(e+="&custom[video_ad_completion_rate]=".concat(window.userBehavior.videoAdCompletionRate)),window.userBehavior&&"boolean"==typeof window.userBehavior.adClicker&&(e+="&custom[ad_clicker]=".concat(window.userBehavior.adClicker)),window.pageCount&&(e+="&custom[pagecount]=".concat(window.pageCount)),window.zctaData)for(var M=0,O=Object.entries(window.zctaData);M<O.length;M++){var I=s(O[M],2),R=I[0],L=I[1];e+="&custom[".concat(R,"]=").concat(L)}window.tpsABTestKVP&&(e+="&custom[ab_tps_test_name]=".concat(null===(T=window.tpsABTestKVP)||void 0===T?void 0:T.ab_tps_test_name),e+="&custom[ab_tps_test_case_name]=".concat(null===(E=window.tpsABTestKVP)||void 0===E?void 0:E.ab_tps_test_case_name));window.boltABTesting&&(e+="&custom[ab_test]=".concat(window.boltABTesting.name,"_").concat(window.boltABTesting.type)),null!==(a=g.prebidSettings)&&void 0!==a&&a.hbTestName&&(e+="&custom[hb_test]=".concat(g.prebidSettings.hbTestName)),null!==(c=window.CurrentVideoConfig)&&void 0!==c&&null!==(u=c.advertising)&&void 0!==u&&null!==(p=u.servers[0])&&void 0!==p&&p.abTestTagType&&(e+="&custom[ab_server_test]=".concat(window.CurrentVideoConfig.advertising.servers[0].abTestTagType)),e+="&custom[instream]=".concat(Object(i.s)(m)),Object(i.z)(window.tycheData,"features","interstitial","on")&&window.tycheData.features.interstitial.on&&(e+="&custom[product_type]=interstitial"),window.tycheData.customPath&&(e+="&custom[custom_path]=".concat(window.tycheData.customPath));var D=window.site.queryStringAsObject;Object(o.e)("spotx.utmParams",!1,{useDaisyChainCount:!0}),D&&(Object(o.e)("spotx.utmParams",!0,{useDaisyChainCount:!0}),D.utm_campaign&&(e+="&custom[utm_campaign]=".concat(D.utm_campaign)),D.utm_source&&(e+="&custom[utm_source]=".concat(D.utm_source)),D.utm_medium&&(e+="&custom[utm_medium]=".concat(D.utm_medium)),D.utm_template&&(e+="&custom[utm_template]=".concat(D.utm_template))),Object(o.e)("spotx.siteTags",!1,{useDaisyChainCount:!0}),Object(i.z)(g.selectedServer.siteTags,"id")&&(Object(o.e)("spotx.siteTags",!0,{useDaisyChainCount:!0}),e+="&custom[ws_id]=".concat(g.selectedServer.siteTags.id.toString())),e+=g.getCustomReportParams(),null!==(v=g.selectedServer)&&void 0!==v&&null!==(h=v.siteTags)&&void 0!==h&&h.placementIds&&g.selectedServer.siteTags.placementIds.forEach((function(t){var n,i;e+="".concat(null!==(n=g.selectedServer)&&void 0!==n&&null!==(i=n.siteTags)&&void 0!==i&&i.coppa?"&custom[cp_placement][]":"&custom[placement][]","=").concat(t)}));var V=Object(r.e)(f);Object(o.e)("spotx.videoCategories",!1,{useDaisyChainCount:!0}),V&&(Object(o.e)("spotx.videoCategories",!0,{useDaisyChainCount:!0}),e+="&custom[vidcont_cat][]=".concat(V));var B=Object(i.q)(g.selectedServer.siteTags);Object(o.e)("spotx.siteCategories",!1,{useDaisyChainCount:!0}),B.length>0&&(Object(o.e)("spotx.siteCategories",!0,{useDaisyChainCount:!0}),e+="&custom[sitecont_cat][]=".concat(B.join("&custom[sitecont_cat][]="))),f.iabIds&&Array.isArray(f.iabIds)&&f.iabIds.length>0&&f.iabIds.forEach((function(t){e+="&content[cat][]=".concat(t)})),window.userSegmentationData&&(e+="&custom[dmp_ids][]=".concat(window.userSegmentationData)),window.tagTestUrl&&(window.tagTestUrl=window.tagTestUrl.replace(/(^\w+:|^)\/\//,""),e+="&token[test_ad_tag]=".concat(encodeURIComponent(window.tagTestUrl)));var x=50*Math.floor(window.client.innerWidth/50),j=50*Math.floor(window.client.innerHeight/50);for(var U in e+="&custom[window_width]=".concat(x,"&custom[window_height]=").concat(j),g.DOMPosition)e+="&custom[".concat(U,"]=").concat(g.DOMPosition[U]);var N=window.customClientTags;return N&&Object.keys(N).length&&Object.keys(N).forEach((function(t){var n=N[t];n&&(e+="&custom[".concat(t,"]=").concat(n))})),e},h=function(e){var t=window.prebidWinner,n=window.kassandraWinner;if(Object(o.e)("prebidWinner","none"),Object(o.e)("kassandraWinner","none"),Object(o.e)("spotx.prebidWinner",!1,{useDaisyChainCount:!0}),Object(o.e)("spotx.kassandraWinner",!1,{useDaisyChainCount:!0}),Object(i.z)(n,"hb_val")){var r=f(n.hb_val);e+="&token[hb_vast]=".concat(n.hb_vast,"&token[hb_val]=").concat(r,"&token[hb_bidder]=").concat(n.hb_bidder,"&token[hb_adid]=").concat(n.hb_adid,"&custom[hb_bidder]=").concat(n.hb_bidder,"&custom[hb_val]=").concat(r),Object(o.e)("kassandraWinner",n.hb_bidder),Object(o.e)("spotx.kassandraWinner",!0,{useDaisyChainCount:!0}),Object(i.b)(window.kassandraWinner)}else if(Object(i.z)(t,"hb_vast")){var a=t.hb_vast,d=f(t.hb_val);e+="&token[hb_vast]=".concat(encodeURIComponent(a.replace(/(^\w+:|^)\/\//,"")),"&token[hb_val]=").concat(d,"&token[hb_bidder]=").concat(t.hb_bidder,"&token[hb_adid]=").concat(t.hb_adid,"&custom[hb_bidder]=").concat(t.hb_bidder,"&custom[hb_val]=").concat(d),t.hb_uuid&&(e+="&token[hb_uuid]=".concat(t.hb_uuid)),Object(o.e)("prebidWinner",t.hb_bidder),Object(o.e)("spotx.prebidWinner",!0,{useDaisyChainCount:!0}),Object(o.e)("prebidWinnerData.bidder",t.hb_bidder),Object(o.e)("prebidWinnerData.bidCpm",parseFloat(t.hb_val)),Object(o.e)("prebidWinnerData.uuid",t.hb_uuid),Object(o.e)("prebidWinnerData.adid",t.hb_adid)}var s=window.amazonWinner;return Object(o.e)("amazonWinner","none"),Object(o.e)("spotx.amazonWinner",!1,{useDaisyChainCount:!0}),s&&(Object(o.e)("amazonWinner",s.amznp),Object(o.e)("spotx.amazonWinner",!0,{useDaisyChainCount:!0}),Object(o.e)("amazonWinnerData.bidder",s.amznp),Object(o.e)("amazonWinnerData.amznbid",s.amznbid),Object(o.e)("amazonWinnerData.size",s.amznsz),e+="&custom[amznbid]=".concat(s.amznbid),e+="&token[amznbid]=".concat(s.amznbid),e+="&token[amzniid]=".concat(s.amzniid)),e},g=function(e){try{return/-(.*)/.exec(e)[1]}catch(t){return e}},f=function(e){return(e=window.parseInt(e,10))>100&&(e=100),e=(e=Math.floor(window.parseInt(e,10)).toFixed(2)).toString().replace(".","_")},m=function(e){Object(o.e)("spotx.hardwareParams",!0,{useDaisyChainCount:!0});var t="&custom[hw_cpu]=".concat(encodeURIComponent(e.CPU));t+="&custom[hw_os]=".concat(encodeURIComponent(e.OS)),t+="&custom[hw_memory]=".concat((parseInt(e.MemorySize,10)/1e9).toFixed(2)),t+="&custom[hw_screens]=".concat(e.NumberOfScreens),t+="&custom[hw_model]=".concat(encodeURIComponent(e.Model)),t+="&custom[hw_manufacturer]=".concat(encodeURIComponent(e.Manufacturer)),t+="&custom[hw_is_laptop]=".concat(e.IsLaptop),t+="&custom[hw_motherboard]=".concat(encodeURIComponent(e.Motherboard));try{e.GPUs.forEach((function(e){t+="&custom[hw_gpu_name][]=".concat(encodeURIComponent(e.Name))}))}catch(e){}try{e.HardDisks.forEach((function(e){t+="&custom[hw_harddisk_caption][]=".concat(encodeURIComponent(e.Caption)),t+="&custom[hw_harddisk_size][]=".concat((e.Size/1e9).toFixed(2)),t+="&custom[hw_harddisk_ssd][]=".concat(e.IsSsd)}))}catch(e){}try{e.Monitors.forEach((function(e){t+="&custom[hw_monitor_name][]=".concat(encodeURIComponent(e.Name)),t+="&custom[hw_monitor_resolution][]=".concat(encodeURIComponent(e.Resolution))}))}catch(e){}try{e.AudioDevices.forEach((function(e){t+="&custom[hw_audio][]=".concat(encodeURIComponent(e))}))}catch(e){}return t}},30:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=function(){return(new Date).getHours().toString()},r=function(){return{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[(new Date).getDay()]}},74:function(e){e.exports={}}}]);