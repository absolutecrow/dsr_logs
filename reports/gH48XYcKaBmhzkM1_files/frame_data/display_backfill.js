(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var i=n(20),o=n(3),r=n(1),a=n(0),l=n(11);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=new r.a("DISPLAY-BACKFILL"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,n,i,r=u(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),w(p(e=r.call(this)),"handleInterval",(function(){var t=p(e);t.interval||(t.interval=setInterval((function(){t.duration-=1,0===t.duration?t.adEnd():(e.duration=t.duration,t._dispatchEvent(o.a.Media.Event.TIME_UPDATE,t.duration))}),1e3))})),w(p(e),"adEnd",(function(){var t=p(e);t.duration=0,t.remove(),t._dispatchEvent(o.a.Media.Event.ENDED),window.BoltAdManager._dispatchEvent(o.a.Media.Event.ENDED),v.info("Display backfill ad ended")})),e.type=o.a.Ad.Type.DISPLAY_BACKFILL,e.duration=15,v.info("Display backfill instantiated"),e.bindListeners(),e}return t=d,(n=[{key:"bindListeners",value:function(){var e=this;e.resizeCb=e.resizeCb.bind(e),window.addEventListener("resize",e.resizeCb)}},{key:"getDuration",value:function(){return this.duration}},{key:"createBackground",value:function(){var e=document.createElement("div");return e.classList.add("display-backfill-bg"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9",e.style.backgroundColor="#000",document.body.appendChild(e),e}},{key:"removeBackground",value:function(e){null!=e&&e.parentNode&&e.parentNode.removeChild(e),this.backgroundDiv=null}},{key:"resizeCb",value:function(){if(void 0!==this.size){var e=this.size[0],t=this.size[1];if(window.innerWidth<e||window.innerHeight<t)v.warn("Window was resized too small for display to fit in container",{width:e,height:t,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),this.adEnd();else{var n={action:"boltBackfillResize",size:[window.innerWidth,window.innerHeight],id:window.id};window.parent.postMessage(JSON.stringify(n),Object(a.k)())}}}},{key:"showHideAdControls",value:function(){var e=window.client.isMobile?document.getElementById("mobile-ad-unmute-btn"):document.getElementById("desktop-ad-unmute-btn");e&&(e.style.display="none");var t=!!window.client.isMobile&&document.getElementById("mobile-ad-play-pause-btn");t&&(t.style.display="none")}},{key:"play",value:function(){}},{key:"playAd",value:function(){var e=this;e.backgroundDiv=e.createBackground(),e.showHideAdControls(),e._dispatchEvent(o.a.Media.Event.DURATION_CHANGE),e._dispatchEvent(o.a.Media.Event.START_TIME_CHANGED),window.displayBackfill.wasSuccessful=function(t){var n=t.reason,i=t.success,r=t.size;v.info("Play Ad",{success:i,size:r}),Object(l.e)("displayBackfill.success",i),Object(l.e)("displayBackfill.reason",n),Array.isArray(r)&&2===r.length&&(Object(l.e)("displayBackfill.adWidth",r[0]),Object(l.e)("displayBackfill.adHeight",r[1])),i?(e.handleInterval(),window.postLogMessage("Display Backfill playing"),v.info("Display Backfill playing"),e.size=r,window.BoltAdManager._dispatchEvent(o.a.Media.Event.LOADED),e._dispatchEvent(o.a.Media.Event.PLAY)):(window.postLogMessage("Display Backfill No ad","warn"),v.warn("Display Backfill is not playing",n),window.displayBackfill.enabled=!1,window.BoltAdManager._dispatchEvent(o.a.Ad.Event.FAILED))};var t={action:"boltRenderBackFill",id:window.id};window.parent.postMessage(JSON.stringify(t),Object(a.k)())}},{key:"remove",value:function(){var e=this;clearInterval(e.interval),e.removeBackground(e.backgroundDiv),window.removeEventListener("resize",e.resizeCb);var t={action:"boltRemoveBackfill",id:window.id};window.parent.postMessage(JSON.stringify(t),Object(a.k)())}}])&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.a)}}]);